<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Sidfate</title>
  
  <subtitle>sidfate&#39;s blog</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://sidfate.github.io/"/>
  <updated>2018-10-14T04:42:31.723Z</updated>
  <id>https://sidfate.github.io/</id>
  
  <author>
    <name>Sidfate</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>é˜¿å°”æ³•Â·ç½—å¯†æ¬§</title>
    <link href="https://sidfate.github.io/2018/10/14/alfa-romeo/"/>
    <id>https://sidfate.github.io/2018/10/14/alfa-romeo/</id>
    <published>2018-10-14T03:20:05.000Z</published>
    <updated>2018-10-14T04:42:31.723Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>èµ°è¿›æ±½è½¦ - æµªæ¼«æ„å¤§åˆ©é£æƒ…ä¸‹çš„ç‹‚é‡çŒ›å…½ <strong>é˜¿å°”æ³•Â·ç½—å¯†æ¬§</strong><br><a id="more"></a></p><h3 id="0x00-å¼€å§‹"><a href="#0x00-å¼€å§‹" class="headerlink" title="0x00 å¼€å§‹"></a>0x00 å¼€å§‹</h3><p>é˜¿å°”æ³•Â·ç½—å¯†æ¬§ï¼Œä½œä¸ºä¸€ä¸ªæ±½è½¦å“ç‰Œçš„åå­—ï¼Œåˆšå¬åˆ°çš„æ—¶å€™å°±è§‰å¾—Bæ ¼åè¶³ã€‚è¿™è½¦åœ¨ä¸–é¢å‡ºç°çš„ä¸å¤šï¼Œè®¤è¯†é˜¿æ–¯é¡¿é©¬ä¸çš„äººå¯èƒ½éƒ½è¦æ¯”å®ƒå¤šï¼Œä½†å®ƒå´ä¹Ÿæ˜¯åè¶³çš„è±ªåå“ç‰Œï¼Œæ‹¥æœ‰ç€æ‚ ä¹…çš„å†å²æ–‡åŒ–ã€‚</p><h3 id="0x01-å†å²"><a href="#0x01-å†å²" class="headerlink" title="0x01 å†å²"></a>0x01 å†å²</h3><p>å‡ºç”Ÿäºæ„å¤§åˆ©ğŸ‡®ğŸ‡¹ï¼Œæ—¶å°šå’Œæ–‡è‰ºä¹‹éƒ½ï¼Œåˆ›å‚å†å²æœ€æ—©å¯å›æº¯è‡³1907å¹´ï¼Œå¹¶ä»1986å¹´å¼€å§‹åŠ å…¥è²äºšç‰¹é›†å›¢æˆä¸ºæˆå‘˜å“ç‰Œä¹‹ä¸€ã€‚è½¦å‚åŸåALFAï¼ˆAnonima Lombarda Fabbrica Automobiliï¼Œä¼¦å·´åº•å…¬æœ‰æ±½è½¦åˆ¶é€ å‚ï¼‰ï¼Œä½†åœ¨1916å¹´å‡ºèº«æ‹¿æ³¢é‡Œçš„å®ä¸šå®¶å°¼å¤æ‹‰Â·ç½—å¯†æ¬§ï¼ˆNicola Romeoï¼‰å…¥ä¸»è¯¥è½¦å‚ï¼Œå¹¶å°†è‡ªå·±çš„å®¶æ—ååŠ å…¥è½¦å‚åç§°ä¸­ï¼Œè€Œæˆä¸ºä»Šæ—¥çš„é˜¿å°”æ³•Â·ç½—å¯†æ¬§ã€‚</p><p><img src="https://upload.wikimedia.org/wikipedia/zh/2/2a/Alfa_Romeo_logo.png" alt=""></p><p>Alfa Romeoçš„å•†æ ‡ä¸­é‚£æ¡åé£Ÿäººçš„è›‡ä»£è¡¨è¥¿å…ƒäº”ä¸–çºªæ—¶ç±³å…°ç»´æ–¯å­”è’‚å®¶æ—å»ºç«‹è€…æ‰€æ€æ‰çš„è›‡ï¼Œåå­—æ˜¯ä»£è¡¨ç»´æ–¯å­”è’‚å®¶æ—æ›¾å‚åŠ åå­—å†›ä¸œå¾ï¼Œåæ¥æˆä¸ºæ„å¤§åˆ©ç±³å…°å¸‚çš„å¸‚å¾½ã€‚</p><p>ä»¥ä¸Šå†…å®¹æ¥è‡ªäº<a href="https://zh.wikipedia.org/wiki/%E9%98%BF%E5%B0%94%E6%B3%95%C2%B7%E7%BD%97%E5%AF%86%E6%AC%A7" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘</a>ã€‚ä¸å‡ºæ‰€æ–™ï¼Œé˜¿å°”æ³•Â·ç½—å¯†æ¬§æ˜¯ä¸¤ä¸ªåå­—ç»“åˆè€Œæ¥ï¼Œå…¶ä¸­çš„ç½—å¯†æ¬§å’Œé‚£ä¸ªã€Šç½—å¯†æ¬§å’Œæœ±ä¸½å¶ã€‹æ²¡æœ‰åŠæ¯›é’±å…³ç³»ï¼Œç„¶è€Œæœ‰è¶£çš„æ˜¯å®ƒæ——ä¸‹æœ‰ä¸€ä¸ªè½¦å‹å«GIULIAï¼ˆæœ±ä¸½å¶ï¼‰ã€‚</p><p><img src="https://www.alfaromeousa.com/content/dam/alfausa/redesign/desktop/Giulia-VLP/SDP-Gallery/Expanded/AlfaRomeo_2018_VLP_Giulia_Gallery15_expanded_Desktop.jpg.alfaimage.2880.jpg" alt=""></p><p>éœ€è¦æ³¨æ„ä¸€ç‚¹æ˜¯ï¼Œåœ¨ä¸Šé¢çš„å†å²ä¸­æåˆ°è¿‡ï¼Œé˜¿å°”æ³•Â·ç½—å¯†æ¬§ç°åœ¨æ˜¯è²äºšç‰¹é›†å›¢çš„æˆå‘˜å“ç‰Œã€‚è¿™ä¸ªè²äºšç‰¹é›†å›¢æ˜¯è²äºšç‰¹å…‹è±æ–¯å‹’æ±½è½¦é›†å›¢çš„å­éƒ¨é—¨ï¼Œè²äºšç‰¹å…‹è±æ–¯å‹’æ±½è½¦é›†å›¢æ˜¯è²äºšç‰¹å’Œå…‹è±æ–¯å‹’çš„åˆå¹¶ï¼Œè¿™é‡Œå‡ºç°äº†å…‹è±æ–¯å‹’ï¼Œè¯·è®°ä½å®ƒï¼Œåœ¨æ–‡ç« ä¹‹åçš„éƒ¨åˆ†ä¼šç»§ç»­æåˆ°ã€‚</p><p><img src="https://img.94477.com/1427/1815161/3.jpg" alt=""></p><h3 id="0x02"><a href="#0x02" class="headerlink" title="0x02"></a>0x02</h3><p>å¦‚ä»Šçš„é˜¿å°”æ³•Â·ç½—å¯†æ¬§è®¾è®¡å‰å«ï¼Œé€ å‹å‡¶æ‚ï¼Œè¿½æ±‚é€Ÿåº¦ï¼Œæ˜¯æ—¶å°šå’Œæ€§èƒ½çš„ç»“åˆä½“ã€‚æˆ‘å°±éšä¾¿æ”¾å‡ å¼ å›¾ï¼Œåº”è¯¥ä¹Ÿä¼šæœ‰ä¸å°‘äººå¯¹ä»–çš„å¤–åœ¨å¿ƒç”Ÿå‘å¾€ï¼Œé‚£å°±æˆ‘ä»¬å°±ä»ä»–çš„å¤–åœ¨è¯´èµ·ã€‚</p><p><img src="https://www.alfaromeousa.com/content/dam/alfausa/redesign/desktop/BHP/Hero-Panel/2019-AlfaRomeo-BHP-Hero-3cars.jpg" alt=""></p><p>ä¸Šå›¾ä¸­å±•ç¤ºçš„æ˜¯ç°åœ¨é˜¿å°”æ³•Â·ç½—å¯†æ¬§ä¸»æ¨çš„3æ¬¾è½¦å‹ï¼Œåˆ†åˆ«å¯¹åº”çš„3ç§ç±»åˆ«çš„è½¦ï¼Œè·‘è½¦ <code>4C Spider</code> ï¼Œè½¿è½¦ <code>GIULIA</code>ï¼ŒSUV <code>STELVIO</code>ã€‚å¯ä»¥çœ‹å‡ºæ¥3æ¬¾çš„éƒ½åº”ç”¨äº†å®¶æ—å¼çš„é€ å‹ï¼Œæ¥ä¸‹æ¥ä¸»è¦ä»‹ç»çš„æ˜¯è¢«å¤§ä¼—æ™®éä»»ä½•çš„è½¿è½¦æ¬¾ <code>GIULIA</code>ã€‚</p><p>é¦–å…ˆä¸€çœ‹åˆ° <code>GIULIA</code> å®¶æ—å¼çš„å‰è„¸ï¼Œå°±è¶³ä»¥æŠ“ä½ä½ çš„çœ¼çƒã€‚ä¸‰å¶è‰â˜˜å¼çš„ä¸­ç½‘é€ å‹ï¼Œé†’ç›®çš„è½¦æ ‡ç‚¹ç¼€ï¼Œé”åˆ©çš„æ°™æ°”å¤§ç¯ï¼Œä»¥åŠå¸ƒæ»¡è‚Œè‚‰æ„Ÿçš„æ›²çº¿çº¿æ¡ï¼Œå‡¶æ‚äºŒä¸ªå­—å½¢å®¹å®ƒä¸€ç‚¹éƒ½ä¸å¤¸å¼ ã€‚</p><p><img src="https://www.alfaromeousa.com/content/dam/alfausa/2019/Giulia/Desktop/2019-ALFARomeo-VLP-Giulia-SDP-Gallery-1.jpg.alfaimage.2880.jpg" alt=""></p><p>æœªå®Œå¾…ç»­ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;èµ°è¿›æ±½è½¦ - æµªæ¼«æ„å¤§åˆ©é£æƒ…ä¸‹çš„ç‹‚é‡çŒ›å…½ &lt;strong&gt;é˜¿å°”æ³•Â·ç½—å¯†æ¬§&lt;/strong&gt;&lt;br&gt;
    
    </summary>
    
      <category term="car" scheme="https://sidfate.github.io/categories/car/"/>
    
    
      <category term="car" scheme="https://sidfate.github.io/tags/car/"/>
    
  </entry>
  
  <entry>
    <title>modernphp-fig</title>
    <link href="https://sidfate.github.io/2018/10/14/tech/php/modernphp-fig/"/>
    <id>https://sidfate.github.io/2018/10/14/tech/php/modernphp-fig/</id>
    <published>2018-10-14T02:54:39.000Z</published>
    <updated>2018-10-14T02:58:45.403Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><a id="more"></a>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>modernphp-password-date</title>
    <link href="https://sidfate.github.io/2018/10/14/tech/php/modernphp-password-date/"/>
    <id>https://sidfate.github.io/2018/10/14/tech/php/modernphp-password-date/</id>
    <published>2018-10-14T02:54:30.000Z</published>
    <updated>2018-10-14T02:58:50.702Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><a id="more"></a>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>modernphp-filter-verification-escape</title>
    <link href="https://sidfate.github.io/2018/10/14/tech/php/modernphp-filter-verification-escape/"/>
    <id>https://sidfate.github.io/2018/10/14/tech/php/modernphp-filter-verification-escape/</id>
    <published>2018-10-14T02:54:17.000Z</published>
    <updated>2018-10-14T02:58:48.404Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><a id="more"></a>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>modernphp-psr</title>
    <link href="https://sidfate.github.io/2018/10/14/tech/php/modernphp-psr/"/>
    <id>https://sidfate.github.io/2018/10/14/tech/php/modernphp-psr/</id>
    <published>2018-10-14T02:53:53.000Z</published>
    <updated>2018-10-14T02:58:53.114Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><a id="more"></a>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>æ‰«ç›²ç¯‡ - cookie&amp;session</title>
    <link href="https://sidfate.github.io/2018/10/02/tech/literacy/cookie-session/"/>
    <id>https://sidfate.github.io/2018/10/02/tech/literacy/cookie-session/</id>
    <published>2018-10-02T03:33:42.000Z</published>
    <updated>2018-10-14T03:16:59.185Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœç°åœ¨çªç„¶æœ‰ä¸€ä¸ªé¢è¯•å®˜é—®ä½ ï¼šä»€ä¹ˆæ˜¯Cookieï¼Ÿä»€ä¹ˆæ˜¯Sessionï¼Ÿä½ ä¼šæ€ä¹ˆå›ç­”ã€‚<br><a id="more"></a></p><h3 id="0x00-å¼€å§‹"><a href="#0x00-å¼€å§‹" class="headerlink" title="0x00 å¼€å§‹"></a>0x00 å¼€å§‹</h3><p>æˆ‘æƒ³äº†ä¸‹ï¼Œé¦–å…ˆå¤§è„‘ä¸­çš„ç»éªŒå‘Šè¯‰æˆ‘cookieæ˜¯å®¢æˆ·ç«¯ç¼“å­˜ä¿¡æ¯çš„ä¸€ç§æ–¹å¼ï¼Œsessionåˆ™æ˜¯æ”¾åœ¨æœåŠ¡ç«¯ã€‚ä½†æ˜¯è¿™ç§è¯´æ³•æ€»è§‰å¾—æœ‰äº›ç‰µå¼ºï¼Œäºæ˜¯ä¸‹é¢æˆ‘ä»¬ä»ä¸€ä¸ªå…·ä½“çš„è¯·æ±‚å‡ºå‘ï¼Œæ¥çœ‹çœ‹å®ƒä»¬åœ¨å®é™…ä¸­æ˜¯æ€ä¹ˆåº”ç”¨çš„ã€‚</p><h3 id="0x01-ä»ä¸€ä¸ªç™»å½•çš„httpè¯·æ±‚å‡ºå‘"><a href="#0x01-ä»ä¸€ä¸ªç™»å½•çš„httpè¯·æ±‚å‡ºå‘" class="headerlink" title="0x01 ä»ä¸€ä¸ªç™»å½•çš„httpè¯·æ±‚å‡ºå‘"></a>0x01 ä»ä¸€ä¸ªç™»å½•çš„httpè¯·æ±‚å‡ºå‘</h3><!-- åœ¨å…·ä½“åˆ†æè¯·æ±‚ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œåœ¨æµè§ˆå™¨ä¸­ï¼ŒåŠ å…¥æˆ‘ä»¬ç™»å½•githubåï¼Œåœ¨ä¸€å®šæ—¶é—´æ®µå†…ï¼Œæˆ‘ä»¬æ˜¯ä¸éœ€è¦é‡æ–°ç™»å½•çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å³ä½¿å…³é—­äº†ç½‘é¡µæˆ–è€…æµè§ˆå™¨ï¼Œä¸‹æ¬¡è¿›å…¥githubè¿˜æ˜¯ç™»å½•çš„çŠ¶æ€ã€‚é‚£ä¹ˆæµè§ˆå™¨å’Œgithubçš„æœåŠ¡ç«¯æ˜¯æ€ä¹ˆå®ç°è¿™ç§çš„å‘¢ã€‚ --><p>è¯·æ³¨æ„ä¸€ä¸ªå‰æï¼Œhttpæ˜¯æ— çŠ¶æ€çš„åè®®ï¼Œæ— çŠ¶æ€å¯¼è‡´äº†æœåŠ¡å™¨ä¸çŸ¥é“å®¢æˆ·ç«¯å¤„ç†è¯·æ±‚çš„ç»“æœã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¸€ä¸ªç™»å½•æµç¨‹ï¼Œç”¨æˆ·åœ¨ç½‘é¡µä¸Šè¾“å…¥è´¦å·å¯†ç å¹¶ç‚¹å‡»ç™»å½•ï¼Œæµè§ˆå™¨å‘é€ç™»å½•è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚å¹¶éªŒè¯ç”¨æˆ·ï¼Œè®°å½•ç”¨æˆ·ç™»å½•çŠ¶æ€ï¼Œç„¶åè¿”å›æˆåŠŸç™»å½•çš„ä¿¡æ¯ï¼Œæœ€åæµè§ˆå™¨æ”¶åˆ°æˆåŠŸçš„æ¶ˆæ¯ï¼Œä½†æ˜¯åœ¨ä¸‹æ¬¡æµè§ˆå™¨å‘é€è¯·æ±‚æ—¶ï¼Œå¦‚æœè¿™æ—¶å€™è¯·æ±‚æ²¡æœ‰åšç‰¹æ®Šçš„å¤„ç†ï¼Œæˆ‘æ˜¯æ— æ³•çŸ¥é“è¿™ä¸ªç”¨æˆ·æ˜¯å¦ç™»å½•çš„çŠ¶æ€ã€‚</p><p>åœ¨ç™»å½•è¯·æ±‚ä¸­ï¼Œæµè§ˆå™¨å‘é€è¯·æ±‚åï¼Œæˆ‘ä»¬çœ‹ä¸‹æœåŠ¡ç«¯åšäº†ä»€ä¹ˆå¤„ç†ï¼š</p><ol><li>è®¾ç½®äº†sessionè®°å½•å½“å‰ç™»å½•çš„ç”¨æˆ·çš„è´¦å·ã€‚</li><li>åœ¨è¿”å›çš„å¤´ä¿¡æ¯ä¸­æœ‰ä¸€ä¸ªç‰¹æ®Šå¤´ï¼ŒSet-Cookieï¼Œå…¶ä¸­åŒ…å«äº†sessionIdçš„ä¿¡æ¯</li></ol><p>sessionIdä¹Ÿæ˜¯æœåŠ¡ç«¯è‡ªåŠ¨ç”Ÿæˆã€‚</p><h3 id="0x02-åœ¨appä¸­ç™»å½•"><a href="#0x02-åœ¨appä¸­ç™»å½•" class="headerlink" title="0x02 åœ¨appä¸­ç™»å½•"></a>0x02 åœ¨appä¸­ç™»å½•</h3>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœç°åœ¨çªç„¶æœ‰ä¸€ä¸ªé¢è¯•å®˜é—®ä½ ï¼šä»€ä¹ˆæ˜¯Cookieï¼Ÿä»€ä¹ˆæ˜¯Sessionï¼Ÿä½ ä¼šæ€ä¹ˆå›ç­”ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="tech" scheme="https://sidfate.github.io/categories/tech/"/>
    
      <category term="literacy" scheme="https://sidfate.github.io/categories/tech/literacy/"/>
    
    
      <category term="literacy" scheme="https://sidfate.github.io/tags/literacy/"/>
    
  </entry>
  
  <entry>
    <title>åˆ†äº«ç¯‡ - èµ°è¿›XSS</title>
    <link href="https://sidfate.github.io/2018/09/30/tech/share/front-xss/"/>
    <id>https://sidfate.github.io/2018/09/30/tech/share/front-xss/</id>
    <published>2018-09-30T01:31:28.000Z</published>
    <updated>2018-10-14T03:18:06.620Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>XSSï¼Œå¾ˆè€³ç†Ÿï¼Ÿæ¥çœ‹çœ‹å®ƒåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ<br><a id="more"></a></p><h3 id="0x00-å‰è¨€"><a href="#0x00-å‰è¨€" class="headerlink" title="0x00 å‰è¨€"></a>0x00 å‰è¨€</h3><p>å…³é”®è¯ï¼š<code>XSS</code>ï¼Œ<code>htmlæ¸²æŸ“</code>ï¼Œ<code>å‰ç«¯å®‰å…¨</code></p><p><a href="https://xss-game.appspot.com" target="_blank" rel="noopener">ä¸€ä¸ªå°æ¸¸æˆ</a></p><h3 id="0x01-æ¦‚å¿µ"><a href="#0x01-æ¦‚å¿µ" class="headerlink" title="0x01 æ¦‚å¿µ"></a>0x01 æ¦‚å¿µ</h3><p>â€œè·¨ç«™è„šæœ¬æ”»å‡»â€ï¼ˆCross Site Scripting)</p><p>ç¬¬ä¸€ç§åˆ†ç±»æ–¹å¼ï¼š</p><ol><li>éæŒä¹…å‹æ”»å‡»<br> é¡¾åæ€ä¹‰ï¼ŒéæŒä¹…å‹xssæ”»å‡»æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œä»…å¯¹å½“æ¬¡çš„é¡µé¢è®¿é—®äº§ç”Ÿå½±å“ã€‚éæŒä¹…å‹xssæ”»å‡»è¦æ±‚ç”¨æˆ·è®¿é—®ä¸€ä¸ªè¢«æ”»å‡»è€…ç¯¡æ”¹åçš„é“¾æ¥ï¼Œç”¨æˆ·è®¿é—®è¯¥é“¾æ¥æ—¶ï¼Œè¢«æ¤å…¥çš„æ”»å‡»è„šæœ¬è¢«ç”¨æˆ·æ¸¸è§ˆå™¨æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æ”»å‡»ç›®çš„ã€‚</li><li>æŒä¹…å‹æ”»å‡»<br> æŒä¹…å‹xssï¼Œä¼šæŠŠæ”»å‡»è€…çš„æ•°æ®å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼Œæ”»å‡»è¡Œä¸ºå°†ä¼´éšç€æ”»å‡»æ•°æ®ä¸€ç›´å­˜åœ¨ã€‚</li></ol><p>ç¬¬äºŒç§åˆ†ç±»æ–¹å¼ï¼š</p><ol><li><p>åå°„å‹ï¼šç»è¿‡åç«¯ï¼Œä¸ç»è¿‡æ•°æ®åº“</p></li><li><p>å­˜å‚¨å‹ï¼šç»è¿‡åç«¯ï¼Œç»è¿‡æ•°æ®åº“</p></li><li><p>DOMï¼šä¸ç»è¿‡åç«¯,DOMâ€”based XSSæ¼æ´æ˜¯åŸºäºæ–‡æ¡£å¯¹è±¡æ¨¡å‹Document Objeet Model,DOM)çš„ä¸€ç§æ¼æ´,dom - xssæ˜¯é€šè¿‡urlä¼ å…¥å‚æ•°å»æ§åˆ¶è§¦å‘çš„</p></li></ol><h3 id="0x02-æ€»ç»“"><a href="#0x02-æ€»ç»“" class="headerlink" title="0x02 æ€»ç»“"></a>0x02 æ€»ç»“</h3><blockquote><p>â€œå¤§å¤šæ•°èŒä¸šï¼ˆä»åŒ»ç”Ÿåˆ°ç”µå·¥ï¼‰ï¼Œå¤šå¹´çš„ç»éªŒç­‰åŒäºå¤šå¹´çš„ä¸“ä¸šçŸ¥è¯†ã€‚ä½†æ˜¯åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼ŒæŠ€æœ¯å˜åŒ–å¦‚æ­¤ä¹‹å¿«ï¼Œä½ èŠ±è´¹äº†å¤§é‡æ—¶é—´å­¦ä¹ æŠ€æœ¯å’Œå·¥å…·ï¼Œä¸€æ—¦è¿™äº›æŠ€æœ¯è¢«å–ä»£ï¼Œä½ çš„çŸ¥è¯†å°†å˜å¾—æ¯«æ— ä»·å€¼ï¼Œå› ä¸ºå®ƒä»¬å¤§éƒ¨åˆ†éƒ½æ˜¯å®æ–½çš„ç»†èŠ‚ã€‚æœ€ç»ˆï¼Œæ‰€æœ‰è¿™äº›å¹´ï¼Œä½ ç¡®å®ç§¯ç´¯äº†ä¸€äº›ä¸€èˆ¬æ€§çš„ç»éªŒï¼Œä½†ä¸å…·ä½“å®æ–½ç›¸å…³çš„çŸ¥è¯†ï¼Œä½ éƒ½ä¸å†æŒæ¡äº†ã€‚<br>å”¯ä¸€ç•™ä¸‹çš„æ˜¯é‚£äº›åŸºæœ¬çš„ä¸œè¥¿ï¼Œä½ åº”è¯¥ä¸“æ³¨äºè½¯ä»¶å¼€å‘çš„æ ¸å¿ƒçŸ¥è¯†å’Œæ•°å­¦çŸ¥è¯†ï¼Œæ‚¨çš„è¿™äº›æŠ€èƒ½ä¼šä¸æ–­å¢é•¿ï¼Œè€Œä¸æ˜¯éšç€æŠ€æœ¯æ½®æµçš„å˜åŒ–è€Œæ¶ˆå¤±ã€‚â€</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;XSSï¼Œå¾ˆè€³ç†Ÿï¼Ÿæ¥çœ‹çœ‹å®ƒåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ&lt;br&gt;
    
    </summary>
    
      <category term="tech" scheme="https://sidfate.github.io/categories/tech/"/>
    
      <category term="web" scheme="https://sidfate.github.io/categories/tech/web/"/>
    
    
      <category term="xss" scheme="https://sidfate.github.io/tags/xss/"/>
    
  </entry>
  
  <entry>
    <title>Linux Pythonå®‰è£…</title>
    <link href="https://sidfate.github.io/2017/02/21/tech/devops/linux-python-install/"/>
    <id>https://sidfate.github.io/2017/02/21/tech/devops/linux-python-install/</id>
    <published>2017-02-21T01:23:00.000Z</published>
    <updated>2018-10-12T10:16:05.636Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æ–‡æœ¬ä»‹ç»å¦‚ä½•åœ¨linuxä¸­å°†pythonæ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚<br><a id="more"></a></p><h3 id="0x00-å‰æ"><a href="#0x00-å‰æ" class="headerlink" title="0x00 å‰æ"></a>0x00 å‰æ</h3><p>ä¸€èˆ¬æ¥è¯´ï¼Œlinuxç³»ç»Ÿéƒ½ä¼šè‡ªå¸¦pythonï¼Œä½†æ˜¯pythonçš„ç‰ˆæœ¬ä¸ä¼šæ˜¯æœ€æ–°çš„ï¼Œä¾‹å¦‚centos6.5çš„æ˜¯2.6.6çš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å°†ç³»ç»Ÿçš„pythonæ›´æ–°åˆ°2.7çš„æœ€æ–°ç‰ˆæœ¬ã€‚</p><h3 id="0x00-å¼€å§‹"><a href="#0x00-å¼€å§‹" class="headerlink" title="0x00 å¼€å§‹"></a>0x00 å¼€å§‹</h3><p>é¦–å…ˆä»å®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆçš„python</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> wget https://www.python.org/ftp/python/2.7.13/Python-2.7.13.tar.xz</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè¿‡ç¨‹å¯èƒ½æ¯”è¾ƒæ…¢ï¼Œå®˜ç½‘ä¸‹å°±æ˜¯å¾ˆæ…¢orzã€‚ä¸‹å®Œåè§£å‹ç„¶åå¼€å§‹å®‰è£…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> tar -xvf Python-2.7.13.tar.xz</span><br><span class="line"><span class="meta">$</span> cd Python-2.7.13/</span><br><span class="line"><span class="meta">$</span> ./configure</span><br><span class="line"><span class="meta">$</span> make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè¿‡ç¨‹ä¹Ÿä¼šéœ€è¦ä¸€æ®µæ—¶é—´ï¼Œå¦‚æœä¸­é€”æŠ¥é”™ï¼ŒåŸºæœ¬å°±æ˜¯gccçš„åŸå› ï¼Œå…ˆæ›´æ–°gcc(<code>yum -y install gcc</code>)å†é‡æ–°å®‰è£…ã€‚é»˜è®¤ä¼šå°†pythonå®‰è£…<code>/usr/local/bin/python2.7</code></p><h3 id="0x01-é…ç½®"><a href="#0x01-é…ç½®" class="headerlink" title="0x01 é…ç½®"></a>0x01 é…ç½®</h3><p>ä¸Šè¿°æ­¥éª¤å®Œæˆåæˆ‘ä»¬æ¥çœ‹ç°åœ¨ç³»ç»Ÿä¸­pythonçš„ç‰ˆæœ¬</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> /usr/local/bin/python2.7 -V</span><br><span class="line">Python 2.7.13</span><br><span class="line"><span class="meta">$</span> python -V</span><br><span class="line">Python 2.6.6</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç³»ç»Ÿé»˜è®¤çš„pythonè¿˜æ˜¯è€ç‰ˆæœ¬çš„ï¼Œè¯´æ˜æˆ‘ä»¬<code>/usr/bin/python</code>ä»ç„¶æŒ‡å‘2.6çš„pythonï¼Œæ‰€ä»¥æ¥ä¸‹æ¥é¦–å…ˆç»™æ—§ç‰ˆæ¢ä¸ªåç§°ï¼Œç„¶åå°†<code>/usr/bin/python</code>æŒ‡å‘æˆ‘ä»¬æ–°ç‰ˆpythonçš„ç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> mv /usr/bin/python /usr/bin/python26</span><br><span class="line"><span class="meta">$</span> ln -s /usr/local/bin/python2.7 /usr/bin/python </span><br><span class="line"><span class="meta">$</span> python -V</span><br><span class="line">Python 2.7.13</span><br></pre></td></tr></table></figure><p>okï¼Œè¿˜å‰©æœ€åä¸€æ­¥ï¼Œä¿®æ”¹yumçš„é…ç½®ï¼Œå› ä¸ºyumç”¨çš„æ˜¯è€ç‰ˆæœ¬çš„pythonï¼Œæˆ‘ä»¬æ›´æ–°ç³»ç»Ÿçš„pythonåå¯¼è‡´yumæ‰€ä½¿ç”¨çš„pythonç‰ˆæœ¬ä¸ç¬¦</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> vi /usr/bin/yum</span><br><span class="line"><span class="meta">#</span>!/usr/bin/python</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°æ²¡ï¼Œyumä½¿ç”¨çš„æ˜¯ç³»ç»Ÿçš„pythonï¼Œæˆ‘ä»¬å°†å…¶ç¬¬ä¸€è¡Œæ”¹æˆ<code>#!/usr/bin/python26</code>å°±okäº†ã€‚</p><h3 id="PIPå®‰è£…"><a href="#PIPå®‰è£…" class="headerlink" title="PIPå®‰è£…"></a>PIPå®‰è£…</h3><p>è‡³æ­¤æˆ‘ä»¬pythonçš„æ›´æ–°å·²ç»å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥å†æ¥å®‰è£…ä¸ªpipï¼Œpipæ˜¯pythonçš„åŒ…ç®¡ç†å™¨ï¼Œå¯ä»¥è¯´pipä¹‹äºpythonç±»ä¼¼äºnpmä¹‹äºnodeï¼Œå¯æƒ³è€ŒçŸ¥å…¶é‡è¦æ€§ã€‚å…³äºpipçš„å®‰è£…ï¼Œä»¥ä¸‹ç»™å‡ºä¸€ä¸ªæœ€å®ç”¨çš„å®‰è£…æ–¹å¼ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> wget https://bootstrap.pypa.io/get-pip.py</span><br><span class="line"><span class="meta">$</span> python get-pip.py</span><br></pre></td></tr></table></figure><p>get-pip.py ä¼šæ ¹æ®ä½ çš„pythonç‰ˆæœ¬è‡ªåŠ¨å®‰è£…pipåŠå…¶ä¾èµ–åŒ…ï¼ˆsetuptoolsï¼‰ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ–‡æœ¬ä»‹ç»å¦‚ä½•åœ¨linuxä¸­å°†pythonæ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="tech" scheme="https://sidfate.github.io/categories/tech/"/>
    
      <category term="devops" scheme="https://sidfate.github.io/categories/tech/devops/"/>
    
    
      <category term="linux" scheme="https://sidfate.github.io/tags/linux/"/>
    
      <category term="python" scheme="https://sidfate.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Linux éƒ¨ç½²nodeæœåŠ¡</title>
    <link href="https://sidfate.github.io/2017/02/17/tech/devops/linux-node-server/"/>
    <id>https://sidfate.github.io/2017/02/17/tech/devops/linux-node-server/</id>
    <published>2017-02-17T07:01:56.000Z</published>
    <updated>2018-10-14T02:39:19.357Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Linuxéƒ¨ç½²ç¯‡ - å¦‚ä½•åœ¨linuxä¸Šä¸æ˜¯expressçš„nodeæœåŠ¡<br><a id="more"></a></p><h3 id="0x00-å‰æ"><a href="#0x00-å‰æ" class="headerlink" title="0x00 å‰æ"></a>0x00 å‰æ</h3><p>è¿™ç¯‡æ–‡ç« ä¸»è¦è®²çš„æ˜¯linuxç³»ç»Ÿä¸‹ä¸€ä¸ªexpressçš„nodeé¡¹ç›®çš„éƒ¨ç½²ï¼Œexpressæ˜¯ä¸€ä¸ªwebå¼€å‘çš„nodeæ¡†æ¶ã€‚</p><h3 id="0x01-è¿‡ç¨‹"><a href="#0x01-è¿‡ç¨‹" class="headerlink" title="0x01 è¿‡ç¨‹"></a>0x01 è¿‡ç¨‹</h3><p>éƒ¨ç½²å·¥å…·æ¨èä½¿ç”¨pm2ï¼Œè¿˜æœ‰ä¸ªæ˜¯foreverï¼Œä½†æ˜¯ç›¸å¯¹è€Œè¨€pm2ç”¨èµ·æ¥æ›´æ–¹ä¾¿çš„ï¼Œæ‰€ä»¥é¦–å…ˆæˆ‘ä»¬å®‰è£…pm2</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> npm install pm2 -g</span><br></pre></td></tr></table></figure><p>ç„¶åä½¿ç”¨pm2åˆ›å»ºè¿›ç¨‹ï¼Œä¾‹å¦‚æˆ‘ä»¬è¿™é‡Œå¯åŠ¨ä¸€ä¸ªexpressé¡¹ç›®ï¼Œå…³äºpm2çš„å…¶ä»–ä½¿ç”¨çœ‹<a href="">è¿™é‡Œ</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pm2 start bin/www</span><br></pre></td></tr></table></figure><p>expressé»˜è®¤ç›‘å¬ç«¯å£æ˜¯3000ï¼Œç°åœ¨ä½ åº”è¯¥å·²ç»å¯ä»¥é€šè¿‡<code>http://yourdomain:3000</code>è®¿é—®ä½ çš„nodeé¡¹ç›®äº†ï¼Œå¦‚æœè¿˜ä¸è¡Œçœ‹<a href="/linux-firewall-open-port">è¿™é‡Œ</a>ã€‚æˆ‘ä»¬æœ€åè¿˜å¯ä»¥ä½¿ç”¨nginxæœåŠ¡å™¨åšä»£ç†ï¼Œä¿®æ”¹<code>nginx.conf</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">    upstream nodejs &#123; </span><br><span class="line">        server 127.0.0.1:3000; </span><br><span class="line">    &#125; </span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name youdomain.com;</span><br><span class="line">        location / &#123; </span><br><span class="line">            proxy_pass http://nodejs;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ä½ åº”è¯¥å·²ç»å¯ä»¥ç›´æ¥é€šè¿‡<code>http://yourdomain</code>è®¿é—®ä½ çš„nodeé¡¹ç›®äº†ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Linuxéƒ¨ç½²ç¯‡ - å¦‚ä½•åœ¨linuxä¸Šä¸æ˜¯expressçš„nodeæœåŠ¡&lt;br&gt;
    
    </summary>
    
      <category term="tech" scheme="https://sidfate.github.io/categories/tech/"/>
    
      <category term="devops" scheme="https://sidfate.github.io/categories/tech/devops/"/>
    
    
      <category term="linux" scheme="https://sidfate.github.io/tags/linux/"/>
    
      <category term="node" scheme="https://sidfate.github.io/tags/node/"/>
    
  </entry>
  
  <entry>
    <title>Python urllib2å¤šçº¿ç¨‹</title>
    <link href="https://sidfate.github.io/2017/01/21/tech/python/python-urllib2-threads/"/>
    <id>https://sidfate.github.io/2017/01/21/tech/python/python-urllib2-threads/</id>
    <published>2017-01-21T03:26:23.000Z</published>
    <updated>2018-10-12T10:57:31.525Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ¬æ–‡ä»‹ç»æ€ä¹ˆä½¿ç”¨urllib2å’Œthreadè®©ä½ çš„çˆ¬è™«å¤šçº¿ç¨‹è¿è¡Œã€‚<br><a id="more"></a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># !/usr/bin/env python</span></span><br><span class="line"><span class="comment"># encoding: utf-8</span></span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread, Lock</span><br><span class="line"><span class="keyword">from</span> Queue <span class="keyword">import</span> Queue</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fetcher</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, threads)</span>:</span></span><br><span class="line">        self.opener = urllib2.build_opener(urllib2.HTTPHandler)</span><br><span class="line">        self.lock = Lock()</span><br><span class="line">        self.q_req = Queue()</span><br><span class="line">        self.q_ans = Queue()</span><br><span class="line">        self.threads = threads</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(threads):</span><br><span class="line">            t = Thread(target=self.get_thread)</span><br><span class="line">            t.setDaemon(<span class="keyword">True</span>)</span><br><span class="line">            t.start()</span><br><span class="line">        self.running = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></span><br><span class="line">        time.sleep(<span class="number">0.5</span>)</span><br><span class="line">        self.q_req.join()</span><br><span class="line">        self.q_ans.join()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_task</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.q_req.qsize()+self.q_ans.qsize()+self.running</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">push</span><span class="params">(self, req)</span>:</span></span><br><span class="line">        self.q_req.put(req)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pop</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.q_ans.get()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_thread</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">            req = self.q_req.get()</span><br><span class="line">            <span class="keyword">with</span> self.lock:</span><br><span class="line">                self.running += <span class="number">1</span></span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                ans = self.opener.open(req).read()</span><br><span class="line">            <span class="keyword">except</span> Exception, what:</span><br><span class="line">                ans = <span class="string">''</span></span><br><span class="line">                <span class="keyword">print</span> what</span><br><span class="line">            self.q_ans.put((req, ans))</span><br><span class="line">            <span class="keyword">with</span> self.lock:</span><br><span class="line">                self.running -= <span class="number">1</span></span><br><span class="line">            self.q_req.task_done()</span><br><span class="line">            time.sleep(<span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    links = [<span class="string">'http://www.verycd.com/topics/%d/'</span> % i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5420</span>, <span class="number">5430</span>)]</span><br><span class="line">    f = Fetcher(threads=<span class="number">10</span>)</span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> links:</span><br><span class="line">        f.push(url)</span><br><span class="line">    <span class="keyword">while</span> f.get_task():</span><br><span class="line">        url, content = f.pop()</span><br><span class="line">        <span class="keyword">print</span> url, len(content)</span><br></pre></td></tr></table></figure><blockquote><p>æ›´å¤šçˆ¬è™«æŠ€å·§è¯·æˆ³<a href="/spider">ä¼ é€é—¨</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ä»‹ç»æ€ä¹ˆä½¿ç”¨urllib2å’Œthreadè®©ä½ çš„çˆ¬è™«å¤šçº¿ç¨‹è¿è¡Œã€‚&lt;br&gt;
    
    </summary>
    
      <category term="tech" scheme="https://sidfate.github.io/categories/tech/"/>
    
      <category term="python" scheme="https://sidfate.github.io/categories/tech/python/"/>
    
    
      <category term="python" scheme="https://sidfate.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Linux æ­å»ºsvnæœåŠ¡å™¨</title>
    <link href="https://sidfate.github.io/2017/01/21/tech/devops/linux-svn-server/"/>
    <id>https://sidfate.github.io/2017/01/21/tech/devops/linux-svn-server/</id>
    <published>2017-01-21T01:40:23.000Z</published>
    <updated>2018-10-14T02:36:45.836Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ¬æ–‡ä»‹ç»åœ¨linuxæ­å»ºè‡ªå·±çš„svnæœåŠ¡å™¨ã€‚<br><a id="more"></a></p><h3 id="0x00-å¼€å§‹"><a href="#0x00-å¼€å§‹" class="headerlink" title="0x00 å¼€å§‹"></a>0x00 å¼€å§‹</h3><ol><li><p>é€šè¿‡yumç›´æ¥å®‰è£…subversion</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> yum install subversion</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºç‰ˆæœ¬åº“ã€‚ç‰ˆæœ¬åº“æ˜¯ä¸€ä¸ªsvnç”¨æ¥è¿›è¡Œç‰ˆæœ¬ç®¡ç†çš„æ§åˆ¶ä¸­å¿ƒï¼Œæˆ‘ä»¬å°†/home/svnä½œä¸ºæˆ‘ä»¬ç®¡ç†æ‰€æœ‰ç‰ˆæœ¬åº“çš„ç›®å½•ï¼Œç„¶ååœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ªprojectçš„ç‰ˆæœ¬åº“ã€‚</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> mkdir /home/svn</span><br><span class="line"><span class="meta">$</span> svnadmin create /home/svn/project</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹ç‰ˆæœ¬åº“é…ç½®ã€‚</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> cd /home/svn/project &amp;&amp; ls</span><br><span class="line">conf  db  format  hooks  locks  README.txt</span><br></pre></td></tr></table></figure><p> åˆ›å»ºå®Œæ¯•çš„ç‰ˆæœ¬åº“ä¸­å­˜åœ¨confï¼Œhooksï¼Œlocksç­‰ç›®å½•å’Œæ–‡ä»¶ã€‚</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> cd conf/ &amp;&amp; ls</span><br><span class="line">authz  passwd  svnserve.conf</span><br></pre></td></tr></table></figure><p> è¿›å…¥confç›®å½•æˆ‘ä»¬èƒ½çœ‹åˆ°3ä¸ªé…ç½®æ–‡ä»¶ï¼šauthzï¼Œpasswdï¼Œsvnserve.confã€‚authzæ˜¯svnç”¨æˆ·çš„æƒé™é…ç½®æ–‡ä»¶ï¼Œpasswdæ˜¯svnç”¨æˆ·å¯†ç çš„é…ç½®æ–‡ä»¶ï¼Œsvnserve.confæ˜¯ç‰ˆæœ¬åº“çš„ä¸»é…ç½®æ–‡ä»¶ã€‚</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> vi passwd</span><br></pre></td></tr></table></figure><p> æˆ‘ä»¬å…ˆä¿®æ”¹passwdï¼Œåœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä¸€è¡Œè¡¨ç¤ºæ·»åŠ ä¸€ä¸ªç”¨æˆ·ã€‚</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[users]</span><br><span class="line">sidfate = sidfate</span><br></pre></td></tr></table></figure><p> ç„¶åä¿®æ”¹authzï¼Œåœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„svnç”¨æˆ·å¯¹æ ¹ç›®å½•çš„æƒé™è®¾ç½®ï¼Œè¿™é‡Œæˆ‘ä»¬è®¾ç½®ä¸ºrwï¼ˆè¯»å†™ï¼‰ï¼Œè¿™é‡Œçš„æ ¹ç›®å½•æŒ‡çš„æ˜¯ç‰ˆæœ¬åº“çš„æ ¹ç›®å½•ã€‚</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[/]</span><br><span class="line">sidfate = rw</span><br></pre></td></tr></table></figure><p> æœ€åä¿®æ”¹svnserve.confï¼Œå»é™¤ä¸‹é¢é…ç½®å‰çš„æ³¨é‡Šã€‚</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">anon-access = read</span><br><span class="line">auth-access = write</span><br><span class="line">password-db = passwd</span><br><span class="line">authz-db = authz</span><br></pre></td></tr></table></figure><p> è¿™é‡Œè¯´æ˜ä¸€ä¸‹ï¼Œç½‘ä¸Šçš„èµ„æ–™æœ‰çš„è¯´è®²<code>realm = My First Repository</code>è¿™ä¸€è¡Œä¹Ÿå»æ³¨é‡Šï¼Œå®é™…æµ‹è¯•æ²¡æœ‰å¿…è¦ï¼Œè¿˜æœ‰å¦‚æœä½ åœ¨å®¢æˆ·ç«¯å°è¯•checkoutæ—¶å‡ºç°æƒé™éªŒè¯çš„é”™è¯¯å¯ä»¥å°†<code>authz-db = authz</code>è¿™ä¸€è¡Œæ³¨é‡Šå›å»å°±å¯ä»¥äº†ã€‚</p></li><li><p>å¯åŠ¨å’Œå…³é—­svnæœåŠ¡ã€‚</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> svnserve â€“d â€“r /home/svn/project/</span><br></pre></td></tr></table></figure><p>-dæŒ‡æ˜ä»¥å®ˆæŠ¤æ¨¡å¼è¿è¡Œï¼Œ-ræŒ‡å®šæ ¹ç›®å½•ï¼Œè¿˜å¯ä»¥ä½¿ç”¨â€“listen-port=åˆ‡æ¢ç›‘å¬ç«¯å£ï¼Œé»˜è®¤ç«¯å£ä¸º3690ã€‚å…³é—­svnæœåŠ¡å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ã€‚</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> ps -ef | grep svnserve</span><br><span class="line">root      1452   871  0 15:44 pts/0    00:00:00 grep svnserve</span><br><span class="line">root     29508     1  0 Jan20 ?        00:00:00 svnserve -d -r /home/svn/project/</span><br><span class="line"><span class="meta">$</span> kill 29508</span><br></pre></td></tr></table></figure></li><li><p>æœ¬åœ°ä¸æœåŠ¡å™¨æ•°æ®åŒæ­¥ã€‚æˆ‘ä»¬ç°åœ¨å¯ä»¥åœ¨å®¢æˆ·ç«¯ç¯å¢ƒcheckoutåˆ°æœ¬åœ°ï¼Œwindowsç¯å¢ƒä¸‹å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·TortoiseSVNï¼Œæ“ä½œå¾ˆæ–¹ä¾¿ï¼Œå¦‚æœæ˜¯linuxå®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨checkoutå‘½ä»¤ã€‚</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ svn checkout svn://myurl/project</span><br></pre></td></tr></table></figure><p> è¿™é‡Œæœ‰ä¸€ä¸ªè¯¯åŒºï¼Œæ²¡æœ‰æ¥è§¦è¿‡ç‰ˆæœ¬æ§åˆ¶çš„äººå¯èƒ½å°è¯•äº†åœ¨æœ¬åœ°æ·»åŠ ä¸€ä¸ªæ–‡ä»¶å¹¶ä¸Šä¼ ï¼Œç„¶åå‘ç°åœ¨æœåŠ¡å™¨ä¸Šæ‰¾ä¸åˆ°ä¸Šä¼ çš„æ–‡ä»¶ã€‚å®é™…ä¸Šç‰ˆæœ¬æ§åˆ¶è®°å½•äº†ä½ çš„æäº¤ï¼Œä½ å¯ä»¥åœ¨æœ¬åœ°çš„å¦ä¸€å¤„checkoutè¯¥é¡¹ç›®å‘ç°ä½ ä¸Šä¼ çš„æ–‡ä»¶å·²ç»å­˜åœ¨äº†ã€‚åœ¨æœåŠ¡å™¨ä¸Šå…¶å®ä¹Ÿæ˜¯åŒä¸€ä¸ªé“ç†ï¼Œä½ åœ¨æœåŠ¡å™¨ä¸ŠåŒæ ·éœ€è¦checkoutä¸€ä»½ä»£ç ï¼Œæˆ‘ä»¬ä¹‹å‰æ‰€ä½œçš„å…¶å®å°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªæ–‡ä»¶æ§åˆ¶çš„ä¸­æ¢ï¼Œä½ æäº¤æ–‡ä»¶åˆ°svnæœåŠ¡å™¨ï¼Œç„¶ååœ¨ä½ çš„æœåŠ¡å™¨ä¸Šæ›´æ–°ä»£ç ã€‚ä¹Ÿè®¸ä½ ä¼šè§‰å¾—è¿™ä¸ªæ­¥éª¤ç¹çäº†ï¼Œåˆ«æ‹…å¿ƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨svnçš„post-commitæ¥è‡ªåŠ¨åŒæ­¥ä»£ç çš„æ›´æ–°ï¼Œæ¥è¾¾åˆ°ä½ æœ¬åœ°çš„ä»£ç æäº¤åæœåŠ¡å™¨ä¸Šçš„ä»£ç åŒæ­¥æ›´æ–°çš„åŠŸèƒ½ã€‚</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> cd /home/svn/project/hooks </span><br><span class="line"><span class="meta">$</span> cp post-commit.tmpl post-commit</span><br><span class="line"><span class="meta">$</span> vi post-commit</span><br></pre></td></tr></table></figure><p> æ‰¾åˆ°ä½ ç‰ˆæœ¬åº“çš„hooksç›®å½•ï¼Œæ‹·è´post-commit.tmplä¸ºpost-commitï¼Œç„¶åç¼–è¾‘è¯¥æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">REPOS="$1"</span><br><span class="line">REV="$2"</span><br><span class="line">cd /home/wwwroot/project/ &amp;&amp; /usr/bin/svn update --username sidfate --password sidfate</span><br></pre></td></tr></table></figure><p> æ³¨æ„ç¬¬ä¸‰æ¡è¯­å¥ï¼Œ/home/wwwroot/project/å°±æ˜¯æˆ‘æ”¾åœ¨æœåŠ¡å™¨ä¸Šçš„ä»£ç ç›®å½•ï¼Œè¿™é‡Œçš„æ“ä½œå°±æ˜¯æ¯æ¬¡æœ‰svnæäº¤åè¿›å…¥è¯¥ç›®å½•ç„¶åæ›´æ–°ä»£ç ã€‚è¿˜è¦æ³¨æ„çš„æ˜¯ï¼Œè¯·ç»™äºˆpost-commitè¶³å¤Ÿçš„æƒé™ï¼Œä¸ç„¶æäº¤çš„æ—¶å€™ä¼šæç¤ºè¯¥æ–‡ä»¶å‡ºé”™ã€‚</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> chmod 770 post-commit</span><br></pre></td></tr></table></figure><p> ä»ç„¶éœ€è¦æ³¨æ„çš„ä¸€ä¸ªé—®é¢˜æ˜¯å¦‚æœä½ çš„svnç›®å½•ä¸­å­˜åœ¨ä¸­æ–‡å‘½åçš„æ–‡ä»¶ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹ç±»ä¼¼çš„é”™è¯¯:</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svn: Error converting entry in directory &apos;.&apos; to UTF-8</span><br></pre></td></tr></table></figure><p> è¿™ä¸ªæ—¶å€™ä½ éœ€è¦åœ¨ä¹‹å‰ç¼–å†™çš„post-commitæ–‡ä»¶é‡Œçš„å‘½ä»¤å‰åŠ ä¸Šä¸€æ®µè®¾ç½®ç¼–ç ã€‚</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export LANG=en_US.UTF-8 &amp;&amp; cd /home/wwwroot/project/ &amp;&amp; /usr/bin/svn update --username sidfate --password sidfate</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ä»‹ç»åœ¨linuxæ­å»ºè‡ªå·±çš„svnæœåŠ¡å™¨ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="tech" scheme="https://sidfate.github.io/categories/tech/"/>
    
      <category term="devops" scheme="https://sidfate.github.io/categories/tech/devops/"/>
    
    
      <category term="linux" scheme="https://sidfate.github.io/tags/linux/"/>
    
      <category term="svn" scheme="https://sidfate.github.io/tags/svn/"/>
    
  </entry>
  
  <entry>
    <title>Python zipæš´åŠ›ç ´è§£</title>
    <link href="https://sidfate.github.io/2016/12/10/tech/python/python-zip-crack/"/>
    <id>https://sidfate.github.io/2016/12/10/tech/python/python-zip-crack/</id>
    <published>2016-12-10T06:34:00.000Z</published>
    <updated>2018-10-14T01:51:54.621Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ç½‘ä¸Šä¸‹åˆ°å¸¦æœ‰å¯†ç çš„zipæ–‡ä»¶ï¼Œä½†æ˜¯åˆæ²¡æœ‰ç»™å‡ºå¯†ç ï¼Œç€å®å¤´ç–¼ï¼Œä¸å¦‚è‡ªåŠ¨åŠ¨æ‰‹ç”¨pythonå†™ä¸€ä¸ªzipæš´åŠ›ç ´è§£ç¨‹åºã€‚<br><a id="more"></a></p><blockquote><p>é˜…è¯»æ–‡æœ¬å‰æ¨èæ‚¨å…ˆæµè§ˆä¹‹å‰çš„æ–‡ç« ï¼š<a href="/tech/python/python-password-dict">Python åˆ›å»ºé»‘å®¢å­—å…¸</a></p></blockquote><h3 id="0x00-å‰æ"><a href="#0x00-å‰æ" class="headerlink" title="0x00 å‰æ"></a>0x00 å‰æ</h3><ol><li><p>pythonæä¾›äº†å¯¹zipæ–‡ä»¶çš„æ“ä½œåº“zipfileã€‚å…¶ä¸­ ZipFile ç±»ä¸­çš„ extractall() æ–¹æ³•æä¾›äº† pwd å‚æ•°ä½œä¸º zip æ–‡ä»¶çš„å¯†ç ã€‚<a href="https://docs.python.org/2.7/library/zipfile.html" target="_blank" rel="noopener">æ›´å¤šå…³äº zipfile</a></p></li><li><p>python ä¸­çš„ optparse æ¨¡å—å¯ä»¥ç”¨æ¥å¤„ç†å‘½ä»¤è¡Œå‚æ•°ã€‚å…¶ä¸»è¦ä½¿ç”¨æµç¨‹ï¼šé¦–å…ˆï¼Œå¿…é¡» import OptionParser ç±»ï¼Œåˆ›å»ºä¸€ä¸ª OptionParser å¯¹è±¡ï¼Œç„¶åï¼Œä½¿ç”¨ add_option æ¥å®šä¹‰å‘½ä»¤è¡Œå‚æ•°ï¼Œæ¯ä¸ªå‘½ä»¤è¡Œå‚æ•°å°±æ˜¯ç”±å‚æ•°åå­—ç¬¦ä¸²å’Œå‚æ•°å±æ€§ç»„æˆçš„ã€‚æœ€åï¼Œä¸€æ—¦ä½ å·²ç»å®šä¹‰å¥½äº†æ‰€æœ‰çš„å‘½ä»¤è¡Œå‚æ•°ï¼Œè°ƒç”¨ parse_args() æ¥è§£æç¨‹åºçš„å‘½ä»¤è¡Œã€‚<a href="https://docs.python.org/2/library/optparse.html" target="_blank" rel="noopener">æ›´å¤šå…³äº optparse</a></p></li></ol><p>ä½œä¸ºæµ‹è¯•ï¼Œæˆ‘ä»¬å°†æˆ‘ä»¬å†™ä¸€ä¸ªåä¸º unzip.py çš„è„šæœ¬æ¥ç ´è§£å¯†ç ï¼Œåœ¨å®ƒçš„åŒçº§ç›®å½•ä¸‹å­˜åœ¨æµ‹è¯•æ–‡ä»¶ test.zip å’Œå­—å…¸æ–‡ä»¶ dict.txtï¼ˆ<a href="/tech/python/python-password-dict">å…³äºå­—å…¸æ–‡ä»¶çš„åˆ›å»º</a>ï¼‰ï¼Œå…¶ä¸­ zip æ–‡ä»¶çš„å¯†ç ä¸º 123456 ã€‚</p><h3 id="0x01-ä»£ç "><a href="#0x01-ä»£ç " class="headerlink" title="0x01 ä»£ç "></a>0x01 ä»£ç </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> zipfile</span><br><span class="line"><span class="keyword">import</span> optparse</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">extractFile</span><span class="params">(zFile, password)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        zFile.extractall(pwd=password)</span><br><span class="line">        <span class="keyword">print</span> <span class="string">'[+] Found password '</span> + password + <span class="string">'\n'</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    parser = optparse.OptionParser(<span class="string">"usage%prog -f &lt;zipfile&gt; -d &lt;dictionary&gt;"</span>)</span><br><span class="line">    parser.add_option(<span class="string">'-f'</span>, dest=<span class="string">'zname'</span>, type=<span class="string">'string'</span>, \</span><br><span class="line">                      help=<span class="string">'specify zipfile file'</span>)</span><br><span class="line">    parser.add_option(<span class="string">'-d'</span>, dest=<span class="string">'dname'</span>, type=<span class="string">'string'</span>, \</span><br><span class="line">                      help=<span class="string">'specify dictionary file'</span>)</span><br><span class="line">    (options, args) = parser.parse_args()</span><br><span class="line">    <span class="keyword">if</span> (options.zname == <span class="keyword">None</span>) | (options.dname == <span class="keyword">None</span>):</span><br><span class="line">        <span class="keyword">print</span> parser.usage</span><br><span class="line">        exit(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        zname = options.zname</span><br><span class="line">        dname = options.dname</span><br><span class="line">    zFile = zipfile.ZipFile(zname)</span><br><span class="line">    passFile = open(dname)</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> passFile.readlines():</span><br><span class="line">        password = line.strip(<span class="string">'\n'</span>)</span><br><span class="line">        <span class="keyword">if</span> extractFile(zFile, password):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç½‘ä¸Šä¸‹åˆ°å¸¦æœ‰å¯†ç çš„zipæ–‡ä»¶ï¼Œä½†æ˜¯åˆæ²¡æœ‰ç»™å‡ºå¯†ç ï¼Œç€å®å¤´ç–¼ï¼Œä¸å¦‚è‡ªåŠ¨åŠ¨æ‰‹ç”¨pythonå†™ä¸€ä¸ªzipæš´åŠ›ç ´è§£ç¨‹åºã€‚&lt;br&gt;
    
    </summary>
    
      <category term="tech" scheme="https://sidfate.github.io/categories/tech/"/>
    
      <category term="python" scheme="https://sidfate.github.io/categories/tech/python/"/>
    
    
      <category term="python" scheme="https://sidfate.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Python åˆ›å»ºé»‘å®¢å­—å…¸</title>
    <link href="https://sidfate.github.io/2016/09/29/tech/python/python-password-dict/"/>
    <id>https://sidfate.github.io/2016/09/29/tech/python/python-password-dict/</id>
    <published>2016-09-29T09:56:00.000Z</published>
    <updated>2018-10-14T01:46:50.953Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ¬æ–‡å‘Šè¯‰ä½ ä»€ä¹ˆæ˜¯é»‘å®¢å­—å…¸ï¼Œå¦‚ä½•ç”¨pythonè½»æ¾çš„ç”Ÿæˆé»‘å®¢å¸¸ç”¨çš„å¯†ç å­—å…¸ã€‚<br><a id="more"></a></p><h3 id="0x00-å‰æ"><a href="#0x00-å‰æ" class="headerlink" title="0x00 å‰æ"></a>0x00 å‰æ</h3><p>é»‘å®¢å­—å…¸ï¼Œå…¶å®å°±æ˜¯ä¸€äº›å¸¸ç”¨çš„å­—ç¬¦é›†åˆï¼Œå¾€å¾€åŒ…å«äº†å¤§é‡çš„åˆ»æ„ç”Ÿæˆçš„å­—ç¬¦ä¸²ç»„åˆï¼Œç”¨æ¥æš´åŠ›ç ´è§£æŸäº›å¯†ç ã€‚æˆ‘ä»¬å¯ä»¥ç”¨pythonï¼Œåªä¹¦å†™å‡ è¡Œä»£ç ï¼Œå°±å¯ä»¥è¿­ä»£ç”Ÿæˆå¤§é‡æˆ‘ä»¬éœ€è¦çš„å­—ç¬¦ä¸²ç»„åˆã€‚</p><p>é¦–å…ˆç®€å•çš„ä»‹ç»ä¸‹ç”¨åˆ°çš„2ä¸ªåº“ï¼š<strong>string</strong> å’Œ <strong>itertools</strong>ã€‚</p><ul><li>ä»‹ç» <strong>string</strong> æ¨¡å—ä¸­å‡ ä¸ªæœ‰ç”¨çš„å…¨å±€å˜é‡ï¼š<ul><li>string.letters: <code>abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ</code></li><li>string.printable: <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">  - string.lowercase:Â `abcdefghijklmnopqrstuvwxyz`</span><br><span class="line">  - string.uppercase:Â `ABCDEFGHIJKLMNOPQRSTUVWXYZ`</span><br><span class="line"></span><br><span class="line">* **itertools** æ˜¯pythonçš„å¾ªç¯å™¨åº“ã€‚å¾ªç¯å™¨æ˜¯å¯¹è±¡çš„å®¹å™¨ï¼ŒåŒ…å«æœ‰å¤šä¸ªå¯¹è±¡ã€‚`itertools.product()` çš„ç»“æœä¸ºç¬›å¡å°”ç§¯ï¼Œç›¸å½“äºä¸€ä¸ªåµŒå¥—å¾ªç¯ã€‚`itertools.chain()`å°†å¤šä¸ªå¾ªç¯å™¨ç»“åˆæˆå•ä¸ªå¾ªç¯å™¨ã€‚[æ›´å¤šå…³äº itertools](https://docs.python.org/2/library/itertools.html)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 0x01 ä»£ç </span><br><span class="line">```python</span><br><span class="line"># !/usr/bin/env python</span><br><span class="line"># coding:utf-8</span><br><span class="line"></span><br><span class="line">import sys</span><br><span class="line">import string</span><br><span class="line">import itertools</span><br><span class="line"></span><br><span class="line">def get_strings():</span><br><span class="line">    chars = string.printable[:10]</span><br><span class="line">    strings = []</span><br><span class="line">    for i in xrange(min, max + 1):</span><br><span class="line">        strings.append((itertools.product(chars, repeat=i),))</span><br><span class="line">    return itertools.chain(*strings)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def make_dict(file, list_str):</span><br><span class="line">    f = open(file, &apos;a&apos;)</span><br><span class="line">    for x in list_str:</span><br><span class="line">        print x</span><br><span class="line">        for y in x:</span><br><span class="line">            f.write(&quot;&quot;.join(y))</span><br><span class="line">            f.write(&apos;\n&apos;)</span><br><span class="line">    f.close()</span><br><span class="line">    print &apos;Done&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    if len(sys.argv) == 4:</span><br><span class="line">        try:</span><br><span class="line">            min = int(sys.argv[1])</span><br><span class="line">            max = int(sys.argv[2])</span><br><span class="line">        except:</span><br><span class="line">            print &quot;wrong&quot;</span><br><span class="line">            sys.exit(0)</span><br><span class="line"></span><br><span class="line">        if min &lt;= max:</span><br><span class="line">            list_str = get_strings()</span><br><span class="line">            file = str(sys.argv[3])</span><br><span class="line">            make_dict(file, list_str)</span><br><span class="line">            sys.exit(0)</span><br><span class="line">    else:</span><br><span class="line">        print &quot;missing some argvs&quot;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="0x02-ç»“æœ"><a href="#0x02-ç»“æœ" class="headerlink" title="0x02 ç»“æœ"></a>0x02 ç»“æœ</h3><p>è¿™é‡Œæˆ‘ä»¬çš„è„šæœ¬æ–‡ä»¶ä¸º<code>dict.py</code>ï¼Œåé¢çš„å‚æ•°åˆ†åˆ«ä¸ºå¯†ç çš„æœ€å°é•¿åº¦ã€å¯†ç çš„æœ€å¤§é•¿åº¦ä»¥åŠä¿å­˜çš„å­—å…¸æ–‡ä»¶åã€‚ä¸Šé¢çš„ä¾‹å­è¿è¡ŒæˆåŠŸåä¼šåœ¨è„šæœ¬æ–‡ä»¶åŒçº§ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª<code>dict.txt</code>çš„å­—å…¸æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«6ä½éšæœºçº¯æ•°å­—çš„æ‰€æœ‰ç»„åˆã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡å‘Šè¯‰ä½ ä»€ä¹ˆæ˜¯é»‘å®¢å­—å…¸ï¼Œå¦‚ä½•ç”¨pythonè½»æ¾çš„ç”Ÿæˆé»‘å®¢å¸¸ç”¨çš„å¯†ç å­—å…¸ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="tech" scheme="https://sidfate.github.io/categories/tech/"/>
    
      <category term="python" scheme="https://sidfate.github.io/categories/tech/python/"/>
    
    
      <category term="python" scheme="https://sidfate.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>modern-pdo</title>
    <link href="https://sidfate.github.io/2016/09/23/tech/php/modern-pdo/"/>
    <id>https://sidfate.github.io/2016/09/23/tech/php/modern-pdo/</id>
    <published>2016-09-22T20:16:00.000Z</published>
    <updated>2018-10-14T02:58:41.889Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ç°ä»£åŒ–çš„phpæ¡†æ¶åŸºæœ¬éƒ½ç»§æ‰¿äº†PDOï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹PDOçš„æ¥æºï¼Œä»¥åŠå®ƒåŸç”Ÿçš„ä½¿ç”¨æ–¹å¼ã€‚<br><a id="more"></a></p><h3 id="0x00-ç®€ä»‹"><a href="#0x00-ç®€ä»‹" class="headerlink" title="0x00 ç®€ä»‹"></a>0x00 ç®€ä»‹</h3><p>PDOï¼ˆPHP Data Objectsï¼ŒPHPæ•°æ®å¯¹è±¡ï¼‰æ˜¯ä¸€ç³»åˆ—çš„PHPç±»ï¼ŒæŠ½è±¡äº†ä¸åŒæ•°æ®åº“çš„å…·ä½“å®ç°ï¼Œæä¾›äº†ç»Ÿä¸€çš„æ¥å£æ¥æ“ä½œä¸åŒçš„æ•°æ®åº“ã€‚</p><h3 id="0x01-æ•°æ®åº“è¿æ¥"><a href="#0x01-æ•°æ®åº“è¿æ¥" class="headerlink" title="0x01 æ•°æ®åº“è¿æ¥"></a>0x01 æ•°æ®åº“è¿æ¥</h3><p>PDOç±»çš„æ„é€ æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼ŒæŒ‡å®šäº†DSNï¼ˆData Source Nameï¼Œæ•°æ®æºåç§°ï¼‰ï¼Œæä¾›æ•°æ®è¿æ¥çš„è¯¦ç»†ä¿¡æ¯ã€‚DSNçš„å¼€å¤´æ˜¯æ•°æ®åº“é©±åŠ¨å™¨çš„åç§°ï¼ˆä¾‹å¦‚mysqlæˆ–sqliteï¼‰ï¼Œç„¶åæ¥ä¸€ä¸ªâ€:â€å·ï¼Œåé¢æ˜¯å…¶ä»–è¿æ¥ä¿¡æ¯ï¼ˆä¸»æœºåã€ç«¯å£å·ï¼Œæ•°æ®åº“åå’Œå­—ç¬¦é›†ç­‰ï¼‰ï¼Œæ›´å¤šå†…å®¹å¯ä»¥æŸ¥çœ‹<a href="http://php.net/manual/en/pdo.drivers.php" target="_blank" rel="noopener">pdo.drivers</a>ã€‚PDOç±»æ„é€ æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°å’Œç¬¬ä¸‰ä¸ªå‚æ•°åˆ†åˆ«æ˜¯æ•°æ®åº“çš„ç”¨æˆ·åå’Œå¯†ç ã€‚ä¸¾ä¸€ä¸ªä½¿ç”¨çš„åˆ—å­ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    $pdo = <span class="keyword">new</span> PDO(</span><br><span class="line"><span class="string">'mysql:host=127.0.0.1;dbname=books;port=3306;charset=utf8'</span>,</span><br><span class="line">USERNAME,</span><br><span class="line">PASSWORD</span><br><span class="line">);</span><br><span class="line">&#125; <span class="keyword">catch</span> (PDOException $e) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"Database connection failed"</span>;</span><br><span class="line">    <span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¸å»ºè®®ä½¿ç”¨ç¡¬ç¼–ç çš„æ–¹å¼å†™å…¥æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯ï¼Œè¿™æ ·ä¸€æ—¦æ•°æ®åº“è¿æ¥å‡ºé”™ï¼Œå¾ˆå¯èƒ½å°±æš´éœ²ç»™ç”¨æˆ·ä½ çš„PHPä»£ç ã€‚æ‰€ä»¥æˆ‘ä»¬æ›´å»ºè®®å°†æ•°æ®åº“è¿æ¥ä¿¡æ¯å†™å…¥ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œç„¶ååœ¨ä¸»ç¨‹åºä¸­å¼•å…¥é…ç½®æ–‡ä»¶ã€‚ä¸‹é¢ç»™å‡ºä¸€ä¸ªé…ç½®æ–‡ä»¶çš„æ ·ä¾‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$setting = [</span><br><span class="line"><span class="string">'host'</span>=&gt; <span class="string">'127.0.0.1'</span>,</span><br><span class="line"><span class="string">'port'</span>=&gt; <span class="number">3306</span>,</span><br><span class="line"><span class="string">'dbname'</span>=&gt; <span class="string">'users'</span>,</span><br><span class="line"><span class="string">'username'</span>=&gt; <span class="string">'USERNAME'</span>,</span><br><span class="line"><span class="string">'password'</span>=&gt; <span class="string">'PASSWORD'</span>,</span><br><span class="line"><span class="string">'charset'</span>=&gt; <span class="string">'utf8'</span></span><br><span class="line">];</span><br></pre></td></tr></table></figure><h3 id="é¢„å¤„ç†è¯­å¥"><a href="#é¢„å¤„ç†è¯­å¥" class="headerlink" title="é¢„å¤„ç†è¯­å¥"></a>é¢„å¤„ç†è¯­å¥</h3><p>åœ¨SQLè¯­å¥ä¸­ä½¿ç”¨ç”¨æˆ·è¾“å…¥çš„æ•°æ®ä¸€å®šè¦è¿‡æ»¤ï¼ŒPDOé€šè¿‡é¢„å¤„ç†è¯­å¥å’Œå‚æ•°ç»‘å®šå°†è¿‡æ»¤è¾“å…¥è¿™é¡¹æ“ä½œå˜å¾—ç®€å•å¾ˆå¤šã€‚</p><p>é¢„å¤„ç†è¯­å¥æ˜¯<code>PDOStatement</code>çš„å®ä¾‹ã€‚ä¸€èˆ¬å¯ä»¥ä½¿ç”¨PDOå®ä¾‹çš„<code>prepare()</code>æ–¹æ³•è·å–é¢„å¤„ç†è¯­å¥å¯¹è±¡ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">$sql = <span class="string">'SELECT * FROM users WHERE email=:email'</span>;</span><br><span class="line">$statement = $pdo-&gt;prepare($sql);</span><br><span class="line"></span><br><span class="line">$email = filter_input(INPUT_GET, <span class="string">'email'</span>);</span><br><span class="line">$statement-&gt;bindParam(<span class="string">':email'</span>, $email);</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„SQLè¯­å¥ä¸­ï¼Œ<code>:email</code>æ˜¯å…·åå ä½ç¬¦ï¼Œå¯ä»¥åœ¨<code>$statement</code>å®ä¾‹ä¸­é€šè¿‡<code>bindValue()</code>æ–¹æ³•ç»‘å®šä¸ºæˆ‘ä»¬éœ€è¦çš„å€¼ã€‚é¢„å¤„ç†è¯­å¥å¯ä»¥è‡ªåŠ¨è¿‡æ»¤<code>$email</code>çš„å€¼ï¼Œé˜²æ­¢SQLæ³¨å…¥çš„å‘ç”Ÿã€‚åœ¨ä¸€ä¸ªSQLè¯­å¥ä¸­å¯ä»¥å­˜åœ¨å¤šä¸ªå¤šä¸ªå…·åå ä½ç¬¦ï¼Œ<code>bindParam()</code>æ–¹æ³•æä¾›äº†ç¬¬ä¸‰ä¸ªå‚æ•°ï¼ŒæŒ‡å®šéœ€è¦ç»‘å®šå€¼çš„æ•°æ®ç±»å‹ï¼ˆä¾‹å¦‚<code>PDO::PARAM_INT</code>ï¼Œ<a href="http://php.net/manual/en/pdo.constants.php" target="_blank" rel="noopener">æ›´å¤šå¸¸é‡</a>ï¼‰ï¼Œé»˜è®¤çš„æ•°æ®ç±»å‹æ˜¯å­—ç¬¦ä¸²ã€‚</p><h3 id="æŸ¥è¯¢ç»“æœ"><a href="#æŸ¥è¯¢ç»“æœ" class="headerlink" title="æŸ¥è¯¢ç»“æœ"></a>æŸ¥è¯¢ç»“æœ</h3><p>æœ‰äº†é¢„å¤„ç†è¯­å¥ä¹‹åï¼Œå°±å¯ä»¥åœ¨æ•°æ®åº“ä¸­æ‰§è¡ŒSQLæŸ¥è¯¢æ“ä½œäº†ã€‚è°ƒç”¨é¢„å¤„ç†å¯¹è±¡çš„<code>execute()</code>æ–¹æ³•åä¼šä½¿ç”¨ç»‘å®šçš„æ‰€æœ‰æ•°æ®æ‰§è¡ŒSQLè¯­å¥ã€‚å¦‚æœæ‰§è¡Œçš„æ“ä½œæ˜¯UPDATEï¼ŒINSERTæˆ–DELETEï¼Œ<code>execute()</code>æ–¹æ³•åå·¥ä½œå°±ç»“æŸäº†ï¼ˆå½“ç„¶è¿˜å¯ä»¥é€šè¿‡è¯¥å‡½æ•°è¿”å›TRUEæˆ–FALSEåˆ¤æ–­æ“ä½œæˆåŠŸä¸å¦ï¼‰ã€‚ä½†æ˜¯å¦‚æœæ˜¯SELECTæ“ä½œï¼Œæˆ‘ä»¬è¿˜è¦å»è·å–è¿”å›çš„æ•°æ®ï¼Œè¿™æ—¶å¯ä»¥é€šè¿‡é¢„å¤„ç†å¯¹è±¡çš„<code>fetch()</code>ï¼Œ<code>fetchAll()</code>ï¼Œ<code>fetchColumn()</code>æˆ–<code>fetchObject()</code>æ–¹æ³•è·å–æŸ¥è¯¢ç»“æœã€‚</p><p><code>fetch()</code>ç”¨äºè·å–ç»“æœæ•°æ®é›†çš„ä¸€è¡Œï¼Œè¿™ä¸ªæ–¹æ³•é€‚ç”¨äºè¿­ä»£å¤§å‹çš„æ•°æ®é›†ã€‚<code>fetchAll()</code>å¯ä»¥è·å–æ•´ä¸ªæ•°æ®é›†ï¼Œ<code>fetch()</code>å’Œ<code>fetchAll()</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºPDOç±»çš„<a href="http://php.net/manual/en/pdostatement.fetch.php" target="_blank" rel="noopener">è¿”å›æ–¹å¼å¸¸é‡</a>ï¼Œå†³å®šäº†å¦‚ä½•è¿”å›æŸ¥è¯¢ç»“æœï¼Œå¸¸ç”¨çš„å¸¸é‡æœ‰ï¼š</p><ul><li>PDO::FETCH_ASSOCï¼šè¿”å›ä¸€ä¸ªä»¥æ•°æ®åº“åˆ—åä¸ºé”®çš„å…³è”æ•°ç»„ã€‚</li><li>PDO::FETCH_NUMï¼šè¿”å›ä¸€ä¸ªä»¥æ•°å­—ä¸ºé”®çš„å…³è”æ•°ç»„ã€‚</li><li>PDO::FETCH_OBJï¼šè¿”å›ä¸€ä¸ªå±æ€§åä¸ºæ•°æ®åº“åˆ—åçš„å¯¹è±¡ã€‚</li><li>PDO::FETCH_BOTHï¼šè¿”å›ä¸€ä¸ªé”®æ—¢åŒ…å«æ•°æ®åº“åˆ—åä¹ŸåŒ…å«æ•°ç»„çš„å…³è”æ•°ç»„ã€‚</li></ul><p>ä¸¾ä¸€ä¸ªä½¿ç”¨çš„ä¾‹å­ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$sql = <span class="string">'SELECT id, name FROM users WHERE email=:email'</span>;</span><br><span class="line">$statement = $pdo-&gt;prepare($sql);</span><br><span class="line"></span><br><span class="line">$email = filter_input(INPUT_GET, <span class="string">'email'</span>);</span><br><span class="line">$statement-&gt;bindParam(<span class="string">':email'</span>, $email);</span><br><span class="line">$statement-&gt;execute();</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (($result = $statement-&gt;fetch(PDO::FETCH_ASSOC)) != <span class="keyword">false</span>) &#123;</span><br><span class="line"><span class="keyword">echo</span> $result[<span class="string">'name'</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h3><p>äº‹åŠ¡æ˜¯æŒ‡æŠŠä¸€ç³»åˆ—æ•°æ®åº“è¯­å¥å½“æˆå•ä¸ªé€»è¾‘å•å…ƒæ¥å¤„ç†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œäº‹åŠ¡ä¸­çš„ä¸€ç³»åˆ—sqlè¯­å¥è¦ä¹ˆéƒ½æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆæ ¹æœ¬ä¸æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´äº‹åŠ¡å…·æœ‰åŸå­æ€§ã€‚äº‹åŠ¡çš„åŸå­æ€§ä¹Ÿä¿è¯äº†æ•°æ®çš„ä¸€è‡´æ€§ï¼Œå®‰å…¨æ€§å’ŒæŒä¹…æ€§ã€‚äº‹åŠ¡è¿˜èƒ½æå‡æ€§èƒ½ï¼Œå› ä¸ºå®ƒå®é™…ä¸Šæ˜¯æŠŠå¤šä¸ªæŸ¥è¯¢æ’æˆé˜Ÿåˆ—ï¼Œä¸€æ¬¡å…¨éƒ¨æ‰§è¡Œã€‚</p><p>PDOæ”¯æŒäº‹åŠ¡ï¼Œè€Œä¸”ä½¿ç”¨æ–¹ä¾¿ï¼Œä½ åªè¦æŠŠæ„å»ºå’Œæ‰§è¡Œsqlçš„æ“ä½œæ”¾åœ¨PDOå®ä¾‹çš„<code>beginTransaction()</code>å’Œ<code>commit()</code>ä¸­ã€‚<code>beginTransaction()</code>æ–¹æ³•çš„ä½œç”¨æ˜¯æŠŠåç»­ç”Ÿæˆçš„sqlè¯­å¥æ’å…¥é˜Ÿåˆ—ï¼Œ<code>commit()</code>æ–¹æ³•æ‰§è¡ŒåŸå­äº‹åŠ¡é˜Ÿåˆ—ä¸­çš„sqlè¯­å¥ã€‚</p><p>ä¸‹é¢æ¼”ç¤ºä¸€ä¸ªæœªä½¿ç”¨äº‹åŠ¡çš„ä¾‹å­ï¼Œå…¶æ“ä½œæ˜¯ä»Aè´¦æˆ·çš„é’±è½¬å…¥Bè´¦æˆ·ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">'../setting.php'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">$pdo = <span class="keyword">new</span> PDO(</span><br><span class="line">sprintf(</span><br><span class="line"><span class="string">'mysql:host=%s;dbname=%s;port=%s;charset=%s'</span>,</span><br><span class="line">$setting[<span class="string">'host'</span>],</span><br><span class="line">$setting[<span class="string">'dbname'</span>],</span><br><span class="line">$setting[<span class="string">'port'</span>],</span><br><span class="line">$setting[<span class="string">'charset'</span>]</span><br><span class="line">),</span><br><span class="line">$setting[<span class="string">'username'</span>],</span><br><span class="line">$setting[<span class="string">'password'</span>]</span><br><span class="line">);</span><br><span class="line">&#125; <span class="keyword">catch</span> (PDOException $e) &#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"Database connection failed"</span>;</span><br><span class="line"><span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$stmtSub = $pdo-&gt;prepare(<span class="string">'</span></span><br><span class="line"><span class="string">UPDATE accounts </span></span><br><span class="line"><span class="string">SET amount = amount - :amount</span></span><br><span class="line"><span class="string">WHERE name = :name</span></span><br><span class="line"><span class="string">'</span>);</span><br><span class="line">$stmtAdd = $pdo-&gt;prepare(<span class="string">'</span></span><br><span class="line"><span class="string">UPDATE accounts </span></span><br><span class="line"><span class="string">SET amount = amount + :amount</span></span><br><span class="line"><span class="string">WHERE name = :name</span></span><br><span class="line"><span class="string">'</span>);</span><br><span class="line"></span><br><span class="line">$fromAccount = <span class="string">'A'</span>;</span><br><span class="line">$toAccount = <span class="string">'B'</span>;</span><br><span class="line">$money = <span class="number">50</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»Aè´¦æˆ·å–é’±</span></span><br><span class="line">$stmtSub-&gt;bindParam(<span class="string">':amount'</span>, $money);</span><br><span class="line">$stmtSub-&gt;bindParam(<span class="string">':name'</span>, $fromAccount);</span><br><span class="line">$stmtSub-&gt;execute();</span><br><span class="line"></span><br><span class="line"><span class="comment">// é’±å­˜å…¥Bè´¦æˆ·</span></span><br><span class="line">$stmtAdd-&gt;bindParam(<span class="string">':amount'</span>, $money);</span><br><span class="line">$stmtAdd-&gt;bindParam(<span class="string">':name'</span>, $toAccount);</span><br><span class="line">$stmtAdd-&gt;execute();</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå½“ä»Aè´¦æˆ·å–é’±çš„æ“ä½œæˆåŠŸåï¼Œå‘ç”Ÿäº†ä¸€äº›ä¸å¯æŠ—æ‹’çš„é”™è¯¯ï¼Œå¯¼è‡´äº†åé¢çš„æŠŠé’±åŠ åˆ°Bè´¦æˆ·çš„æ“ä½œæ²¡æœ‰å®Œæˆï¼Œé‚£ä¹ˆè¿™50å…ƒå°±å‡­ç©ºæ¶ˆå¤±äº†ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ã€‚ä½¿ç”¨äº‹åŠ¡æˆ‘ä»¬å¯ä»¥è§£å†³è¿™æ ·çš„é—®é¢˜ã€‚ä¸‹é¢æ˜¯ä½¿ç”¨äº‹åŠ¡çš„æ–¹å¼ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// å¼€å§‹äº‹åŠ¡</span></span><br><span class="line">$pdo-&gt;beginTransaction();</span><br><span class="line"></span><br><span class="line">$fromAccount = <span class="string">'jack'</span>;</span><br><span class="line">$toAccount = <span class="string">'rose'</span>;</span><br><span class="line">$money = <span class="number">50</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»Aè´¦æˆ·å–é’±</span></span><br><span class="line">$stmtSub-&gt;bindParam(<span class="string">':amount'</span>, $money);</span><br><span class="line">$stmtSub-&gt;bindParam(<span class="string">':name'</span>, $fromAccount);</span><br><span class="line">$stmtSub-&gt;execute();</span><br><span class="line"></span><br><span class="line"><span class="comment">// é’±å­˜å…¥Bè´¦æˆ·</span></span><br><span class="line">$stmtAdd-&gt;bindParam(<span class="string">':amount'</span>, $money);</span><br><span class="line">$stmtAdd-&gt;bindParam(<span class="string">':name'</span>, $toAccount);</span><br><span class="line">$stmtAdd-&gt;execute();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æäº¤äº‹åŠ¡</span></span><br><span class="line">$pdo-&gt;commit();</span><br></pre></td></tr></table></figure><blockquote><p>ModernPHP ç³»åˆ—å…¨é›†ï¼š<a href="/modernphp/">ä¼ é€é—¨</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç°ä»£åŒ–çš„phpæ¡†æ¶åŸºæœ¬éƒ½ç»§æ‰¿äº†PDOï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹PDOçš„æ¥æºï¼Œä»¥åŠå®ƒåŸç”Ÿçš„ä½¿ç”¨æ–¹å¼ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="tech" scheme="https://sidfate.github.io/categories/tech/"/>
    
      <category term="php" scheme="https://sidfate.github.io/categories/tech/php/"/>
    
    
      <category term="php" scheme="https://sidfate.github.io/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>ModernPHP é—­åŒ…</title>
    <link href="https://sidfate.github.io/2016/08/28/tech/php/modernphp-closure/"/>
    <id>https://sidfate.github.io/2016/08/28/tech/php/modernphp-closure/</id>
    <published>2016-08-28T08:51:00.000Z</published>
    <updated>2018-10-14T01:35:59.526Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ¬æ–‡ä»‹ç»PHPä¸­çš„é—­åŒ…å’ŒåŒ¿åå‡½æ•°çš„æ¦‚å¿µï¼Œä»¥åŠå®ƒä»¬çš„å…·ä½“ä½¿ç”¨ã€‚<br><a id="more"></a></p><h3 id="0x00-ç®€ä»‹"><a href="#0x00-ç®€ä»‹" class="headerlink" title="0x00 ç®€ä»‹"></a>0x00 ç®€ä»‹</h3><p>é—­åŒ…å’ŒåŒ¿åå‡½æ•°æ˜¯PHP5.3.0ä¸­å¼•å…¥çš„ç‰¹æ€§ã€‚ä¸‹é¢ä»‹ç»ä¸‹è¿™ä¸¤ä¸ªæ¦‚å¿µçš„å®šä¹‰ï¼Œå¯èƒ½çœ‹ä¸Šå»ä¼šæ¯”è¾ƒéš¾ç†è§£ï¼Œä½†æ˜¯åé¢ä¼šç»™å‡ºå®ä¾‹å¯ä»¥æ›´å¥½çš„æŒæ¡ã€‚</p><p>é—­åŒ…æŒ‡çš„æ˜¯åœ¨åˆ›å»ºæ—¶å°è£…å‘¨å›´çŠ¶æ€çš„å‡½æ•°ã€‚å³ä¾¿é—­åŒ…æ‰€åœ¨çš„ç¯å¢ƒä¸å­˜åœ¨äº†ï¼Œé—­åŒ…ä¸­å°è£…çš„çŠ¶æ€ä¾ç„¶å­˜åœ¨ã€‚</p><p>åŒ¿åå‡½æ•°å…¶å®æ˜¯æ²¡æœ‰åå­—çš„å‡½æ•°ï¼ŒåŒ¿åå‡½æ•°å¯ä»¥èµ‹å€¼ç»™å˜é‡ï¼Œä¹Ÿèƒ½åƒå¯¹è±¡é‚£æ ·è¢«ä¼ é€’ï¼Œå¸¸å¸¸è¢«ç”¨ä½œå‡½æ•°æˆ–è€…æ–¹æ³•çš„å›è°ƒã€‚</p><p>ç†è®ºä¸Šè®²ï¼Œé—­åŒ…å’ŒåŒ¿åå‡½æ•°æ˜¯ä¸åŒçš„æ¦‚å¿µï¼Œä½†æ˜¯PHPå°†å…¶æ˜¯åšç›¸åŒçš„æ¦‚å¿µã€‚PHPé—­åŒ…çš„è¯­æ³•å’Œæ™®é€šå‡½æ•°ç›¸åŒï¼Œä½†æ˜¯å…¶å®å®ƒæ˜¯ä¼ªè£…æˆå‡½æ•°çš„å¯¹è±¡ï¼Œäº‹å®ä¸Šæ˜¯Closureç±»çš„å®ä¾‹ã€‚</p><h3 id="0x01-é—­åŒ…çš„åˆ›å»º"><a href="#0x01-é—­åŒ…çš„åˆ›å»º" class="headerlink" title="0x01 é—­åŒ…çš„åˆ›å»º"></a>0x01 é—­åŒ…çš„åˆ›å»º</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$closure = <span class="function"><span class="keyword">function</span><span class="params">($name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> sprintf(<span class="string">'Hello %s'</span>, $name);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">echo</span> $closure(<span class="string">"Josh"</span>);</span><br><span class="line"><span class="comment">// è¾“å‡º Hello Josh</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¹‹æ‰€ä»¥èƒ½å¤Ÿè°ƒç”¨$closureå˜é‡ï¼Œæ˜¯å› ä¸ºè¿™ä¸ªå˜é‡çš„å€¼æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œè€Œä¸”é—­åŒ…å¯¹è±¡å®ç°äº†__invoke()é­”æœ¯æ–¹æ³•ã€‚åªè¦å˜é‡ååæœ‰()ï¼ŒPHPå°±ä¼šå»æŸ¥æ‰¾å¹¶è°ƒç”¨__invoke()æ–¹æ³•ã€‚</p><p>å¾ˆå¤šçš„PHPå‡½æ•°ä¼šç”¨åˆ°å›è°ƒå‡½æ•°ï¼Œæ¯”å¦‚array_map()å’Œpreg_replace_callback()å‡½æ•°ã€‚ä¸‹é¢çš„ä¾‹å­ç»™å‡ºäº†å°†é—­åŒ…å¯¹è±¡ä½œä¸ºå›è°ƒå‚æ•°ä¼ ç»™array_map()å‡½æ•°ã€‚<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$numberPlusOne = array_map(<span class="function"><span class="keyword">function</span><span class="params">($nunmber)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $number + <span class="number">1</span>;</span><br><span class="line">&#125;, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"> </span><br><span class="line">print_r($numberPlusOne);</span><br><span class="line"><span class="comment">// è¾“å‡º [2, 3, 4]</span></span><br></pre></td></tr></table></figure></p><h3 id="0x01-é™„åŠ çŠ¶æ€"><a href="#0x01-é™„åŠ çŠ¶æ€" class="headerlink" title="0x01 é™„åŠ çŠ¶æ€"></a>0x01 é™„åŠ çŠ¶æ€</h3><p>å¦‚æœä½ äº†è§£JavaScriptçš„é—­åŒ…ï¼Œä½ åº”è¯¥çŸ¥é“JavaScriptçš„é—­åŒ…ä¼šè‡ªåŠ¨å°è£…å¼•ç”¨çš„çŠ¶æ€ã€‚ä½†åœ¨PHPä¸­å¹¶ä¸ä¼šï¼Œä½ å¿…é¡»æ‰‹åŠ¨è°ƒç”¨é—­åŒ…å¯¹è±¡çš„bindTo()æ–¹æ³•æˆ–è€…ä½¿ç”¨useå…³é”®å­—ï¼ŒæŠŠçŠ¶æ€é™„åŠ åˆ°PHPé—­åŒ…ä¸­ã€‚</p><p>ä½¿ç”¨useå…³é”®å­—é™„åŠ çŠ¶æ€å¸¸è§å¾—å¤šï¼Œä¸‹é¢ç»™å‡ºäº†ä¾‹å­ï¼Œuseå…³é”®å­—å°†å˜é‡é™„åŠ åˆ°é—­åŒ…æ—¶ï¼Œé™„åŠ çš„å˜é‡ä¼šè®°ä½é™„åŠ æ—¶èµ‹äºˆå®ƒçš„å€¼ã€‚<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">enclosePerson</span><span class="params">($name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">($doCommand)</span> <span class="title">use</span> <span class="params">($name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sprintf(<span class="string">'%s, %s'</span>, $name, $doCommand);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// å°†å­—ç¬¦ä¸²"Clay"å°è£…åœ¨é—­åŒ…ä¸­</span></span><br><span class="line">$clay = enclosePerson(<span class="string">"Clay"</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// ä¼ å…¥å‚æ•°ï¼Œè°ƒç”¨é—­åŒ…</span></span><br><span class="line"><span class="keyword">echo</span> $clay(<span class="string">'go away!'</span>);</span><br><span class="line"><span class="comment">// è¾“å‡º "Clay, go away!"</span></span><br></pre></td></tr></table></figure></p><p>ä¸Šè¿°ä¾‹å­ä¸­ï¼ŒenclosePersonå‡½æ•°æœ‰ä¸€ä¸ªå‚æ•°$nameï¼Œè¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªé—­åŒ…å¯¹è±¡ï¼Œå¹¶ä¸”åœ¨é—­åŒ…å¯¹è±¡ä¸­å°è£…äº†$nameå‚æ•°ã€‚å³ä¾¿è¿”å›çš„é—­åŒ…å¯¹è±¡è·³å‡ºäº†enclosePerson()å‡½æ•°çš„ä½œç”¨åŸŸï¼Œ$nameå‚æ•°çš„å€¼è¿˜æ˜¯èƒ½è·å–åˆ°ï¼Œå› ä¸º$nameå˜é‡ä»åœ¨é—­åŒ…ä¸­ã€‚</p><p>ä¸Šé¢æåˆ°è¿‡ï¼ŒPHPé—­åŒ…æ˜¯å¯¹è±¡ï¼Œå®ƒæœ‰ä¸€ä¸ªbindToæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥æŠŠClosureå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ç»‘å®šåˆ°å…¶ä»–å¯¹è±¡ä¸Šã€‚bindToçš„ç¬¬äºŒä¸ªå‚æ•°å¾ˆé‡è¦ï¼Œå…¶ä½œç”¨æ˜¯æŒ‡å®šç»‘å®šé—­åŒ…çš„é‚£ä¸ªå¯¹è±¡æ‰€å±çš„PHPç±»ã€‚å› æ­¤é—­åŒ…å¯ä»¥è®¿é—®é—­åŒ…å¯¹è±¡ä¸­å—ä¿æŠ¤å’Œç§æœ‰çš„æˆå‘˜å˜é‡ã€‚</p><p>PHPæ¡†æ¶ç»å¸¸ä½¿ç”¨bindToæ–¹æ³•æŠŠè·¯ç”±URLæ˜ å°„åˆ°åŒ¿åå‡½æ•°ä¸Šã€‚æ¡†æ¶ä¼šæŠŠåŒ¿åå‡½æ•°ç»‘å®šåˆ°åº”ç”¨å¯¹è±¡ä¸Šï¼Œè¿™ä¹ˆåšå¯ä»¥åœ¨è¿™ä¸ªåŒ¿åå‡½æ•°ä¸­ä½¿ç”¨$thiså…³é”®å­—å¼•ç”¨é‡è¦çš„åº”ç”¨å¯¹è±¡ï¼Œä¸‹é¢ç»™å‡ºä¾‹å­ã€‚<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> </span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $routes = [];</span><br><span class="line">    <span class="keyword">protected</span> $responseStatus = <span class="string">"200 OK"</span>;</span><br><span class="line">    <span class="keyword">protected</span> $responseContentType = <span class="string">"text/html"</span>;</span><br><span class="line">    <span class="keyword">protected</span> $responseBody = <span class="string">"Hello world"</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">addRoute</span><span class="params">($routePath, $routeCallback)</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;routes[$routePath] = $routeCallback-&gt;bindTo(<span class="keyword">$this</span>, <span class="keyword">__CLASS__</span>);</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">dispatch</span><span class="params">($currentPath)</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">$this</span>-&gt;routes <span class="keyword">as</span> $routePath =&gt; $callback) &#123;</span><br><span class="line">            <span class="keyword">if</span>($routePath === $currentPath) &#123;</span><br><span class="line">                $callback();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        header(<span class="string">'HTTP/1.1 '</span> . <span class="keyword">$this</span>-&gt;responseStatus);</span><br><span class="line">        header(<span class="string">'Content-type: '</span> . <span class="keyword">$this</span>-&gt;responseContentType);</span><br><span class="line">        header(<span class="string">'Content-length: '</span> . mb_strlen(<span class="keyword">$this</span>-&gt;responseBody));</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;responseBody;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Appç±»ä¸­çš„addRoute()æ–¹æ³•ï¼Œå®ƒæœ‰2ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯è·¯ç”±è·¯å¾„ï¼ˆä¾‹å¦‚/users/joshï¼‰å­—ç¬¦ä¸²å’Œä¸€ä¸ªè·¯ç”±å›è°ƒã€‚dispatch()æ–¹æ³•çš„å‚æ•°æ˜¯å½“å‰HTTPè¯·æ±‚çš„è·¯å¾„ï¼Œå®ƒä¼šè°ƒç”¨åŒ¹é…çš„è·¯ç”±å›è°ƒã€‚ç¬¬10è¡Œæ˜¯é‡ç‚¹ï¼Œæˆ‘ä»¬æŠŠå›è°ƒå‡½æ•°ç»‘å®šåœ¨äº†å½“å‰çš„Appå®ä¾‹ä¸­ï¼Œè¿™ä¹ˆåšå°±èƒ½åœ¨å›è°ƒå‡½æ•°ä¸­å¤„ç†Appå®ä¾‹çš„çŠ¶æ€ã€‚<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$app = <span class="keyword">new</span> App();</span><br><span class="line">$app-&gt;addRoute(<span class="string">'/users/josh'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;responseContentType = <span class="string">'application/json;charset=utf8'</span>;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;responseBody = json_encode([<span class="string">'name'</span>=&gt; <span class="string">'josh'</span>]);</span><br><span class="line">&#125;);</span><br><span class="line">$app-&gt;dispatch(<span class="string">'/users/josh'</span>);</span><br></pre></td></tr></table></figure></p><blockquote><p>ModernPHP ç³»åˆ—å…¨é›†ï¼š<a href="/modernphp/">ä¼ é€é—¨</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ä»‹ç»PHPä¸­çš„é—­åŒ…å’ŒåŒ¿åå‡½æ•°çš„æ¦‚å¿µï¼Œä»¥åŠå®ƒä»¬çš„å…·ä½“ä½¿ç”¨ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="tech" scheme="https://sidfate.github.io/categories/tech/"/>
    
      <category term="php" scheme="https://sidfate.github.io/categories/tech/php/"/>
    
    
      <category term="php" scheme="https://sidfate.github.io/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>ModernPHP ç”Ÿæˆå™¨</title>
    <link href="https://sidfate.github.io/2016/08/28/tech/php/modernphp-generator/"/>
    <id>https://sidfate.github.io/2016/08/28/tech/php/modernphp-generator/</id>
    <published>2016-08-28T08:39:00.000Z</published>
    <updated>2018-10-14T01:36:04.276Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ¬æ–‡ä»‹ç»PHPä¸­ç”Ÿæˆå™¨çš„æ¦‚å¿µï¼Œä»¥åŠå®ƒçš„åº”ç”¨ã€‚<br><a id="more"></a></p><h3 id="0x00-ç®€ä»‹"><a href="#0x00-ç®€ä»‹" class="headerlink" title="0x00 ç®€ä»‹"></a>0x00 ç®€ä»‹</h3><p>PHPç”Ÿæˆå™¨æ˜¯PHP5.5.0å¼•å…¥çš„åŠŸèƒ½ï¼Œç”Ÿæˆå™¨å°±æ˜¯ç®€å•çš„è¿­ä»£å™¨ï¼Œä½†ä¸æ ‡å‡†çš„PHPè¿­ä»£å™¨ä¸åŒï¼ŒPHPç”Ÿæˆå™¨ä¸è¦æ±‚å®ç°Iteratoræ¥å£ï¼Œä»è€Œå‡è½»äº†ç±»çš„è´Ÿæ‹…ã€‚ç”Ÿæˆå™¨ä¼šæ ¹æ®éœ€æ±‚è®¡ç®—å¹¶äº§å‡ºè¦è¿­ä»£çš„å€¼ï¼Œè¿™å¯¹åº”ç”¨æ€§èƒ½çš„å½±å“é‡å¤§ã€‚å‡å¦‚æ ‡å‡†çš„PHPè¿­ä»£å™¨ç»å¸¸åœ¨å†…å­˜ä¸­æ‰§è¡Œè¿­ä»£æ“ä½œï¼Œè¿™è¦é¢„å…ˆè®¡ç®—å‡ºæ•°æ®é›†ï¼Œæ€§èƒ½ä½ä¸‹ï¼›å¦‚æœè¦ä½¿ç”¨ç‰¹å®šçš„æ–¹å¼è®¡ç®—å¤§é‡æ•°æ®ï¼Œå¯¹æ€§èƒ½çš„å½±å“æ›´ç”šã€‚æ­¤æ—¶æˆ‘ä»¬ä½¿ç”¨ç”Ÿæˆå™¨ï¼Œå³æ—¶è®¡ç®—å‡ºäº§å‡ºåç»­å€¼ï¼Œä¸å ç”¨å®è´µçš„å†…å­˜èµ„æºã€‚</p><p>PHPç”Ÿæˆå™¨ä¸èƒ½æ»¡è¶³æ‰€æœ‰è¿­ä»£æ“ä½œçš„éœ€æ±‚ï¼Œå› ä¸ºå¦‚æœä¸æŸ¥è¯¢ï¼Œç”Ÿæˆå™¨æ°¸è¿œä¸çŸ¥é“ä¸‹ä¸€ä¸ªè¦è¿­ä»£çš„å€¼æ˜¯ä»€ä¹ˆï¼Œåœ¨ç”Ÿæˆå™¨ä¸­æ— æ³•å¿«è¿›æˆ–åé€€ã€‚ç”Ÿæˆå™¨è¿˜æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œæ— æ³•å¤šæ¬¡è¿­ä»£åŒä¸€ä¸ªç”Ÿæˆå™¨ã€‚ä¸è¿‡ï¼Œå¦‚æœéœ€è¦ï¼Œå¯ä»¥é‡å»ºæˆ–å…‹éš†ç”Ÿæˆå™¨ã€‚</p><h3 id="0x01-ç”Ÿæˆå™¨çš„åˆ›å»º"><a href="#0x01-ç”Ÿæˆå™¨çš„åˆ›å»º" class="headerlink" title="0x01 ç”Ÿæˆå™¨çš„åˆ›å»º"></a>0x01 ç”Ÿæˆå™¨çš„åˆ›å»º</h3><p>ç”Ÿæˆå™¨çš„åˆ›å»ºå¾ˆç®€å•ï¼Œå› ä¸ºç”Ÿæˆå™¨å°±æ˜¯PHPå‡½æ•°ï¼Œåªä¸è¿‡è¦åœ¨å‡½æ•°ä¸­ä¸€æ¬¡æˆ–å¤šæ¬¡ä½¿ç”¨yieldå…³é”®å­—ã€‚ä¸æ™®é€šçš„PHPå‡½æ•°ä¸åŒçš„æ˜¯ï¼Œç”Ÿæˆå™¨ä»ä¸è¿”å›å€¼ï¼Œåªäº§å‡ºå€¼ã€‚<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myGenerator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">'value1'</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">'value2'</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">'value3'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°æ—¶ï¼ŒPHPä¼šè¿”å›ä¸€ä¸ªå±äºGeneratorç±»çš„å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡å¯ä»¥ä½¿ç”¨foreach()å‡½æ•°è¿­ä»£ã€‚æ¯æ¬¡è¿­ä»£ï¼ŒPHPä¼šè¦æ±‚Generatorå®ä¾‹è®¡ç®—å¹¶æä¾›ä¸‹ä¸€ä¸ªè¦è¿­ä»£çš„å€¼ã€‚ç”Ÿæˆå™¨çš„ä¼˜é›…ä½“ç°åœ¨ï¼Œæ¯æ¬¡äº§å‡ºä¸€ä¸ªå€¼åï¼Œç”Ÿæˆå™¨çš„å†…éƒ¨çŠ¶æ€ä¼šåœé¡¿ï¼›å‘ç”Ÿæˆå™¨è¯·æ±‚ä¸‹ä¸€ä¸ªå€¼æ—¶ï¼Œå†…éƒ¨çŠ¶æ€åˆä¼šæ¢å¤ã€‚<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">foreach</span> ($myGenerator <span class="keyword">as</span> $yieldedValue) &#123;</span><br><span class="line">    <span class="keyword">echo</span> $yieldedValue, PHP_EOL;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// è¾“å‡º:</span></span><br><span class="line"><span class="comment">// value1</span></span><br><span class="line"><span class="comment">// value2</span></span><br><span class="line"><span class="comment">// value3</span></span><br></pre></td></tr></table></figure></p><h3 id="0x02-ç”Ÿæˆå™¨çš„ä½¿ç”¨"><a href="#0x02-ç”Ÿæˆå™¨çš„ä½¿ç”¨" class="headerlink" title="0x02 ç”Ÿæˆå™¨çš„ä½¿ç”¨"></a>0x02 ç”Ÿæˆå™¨çš„ä½¿ç”¨</h3><p>ä¸‹é¢æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œç”¨äºç”Ÿæˆä¸€ä¸ªå¤§èŒƒå›´å†…æ•°å€¼é›†åˆã€‚</p><p>ä¸€ä¸ªæ™®é€šçš„æ —å­ï¼š<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeRange</span><span class="params">($length)</span> </span>&#123;</span><br><span class="line">    $dataset = [];</span><br><span class="line">    <span class="keyword">for</span>($i=<span class="number">0</span>; $i&lt;$length; $i++) &#123;</span><br><span class="line">        $dataset[] = $i;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> $dataset;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">$customRange = makeRange(<span class="number">1000000</span>);</span><br><span class="line"><span class="keyword">foreach</span> ($customRange <span class="keyword">as</span> $i) &#123;</span><br><span class="line">    <span class="keyword">echo</span> $i, PHP_EOL;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸Šè¿°çš„ä»£ç æ²¡æœ‰å–„ç”¨å†…å­˜ï¼Œå› ä¸ºmakeRange()å‡½æ•°è¦ä¸ºé¢„å…ˆåˆ›å»ºçš„ä¸€ä¸ªæœ‰ä¸€ç™¾ä¸‡ä¸ªæ•´æ•°ç»„æˆçš„æ•°ç»„åˆ†é…å†…å­˜ã€‚PHPç”Ÿæˆå™¨å®ç°ç›¸åŒçš„æ“ä½œã€‚ä¸è¿‡ä¸€ä¸ªåªä¼šä¸ºä¸€ä¸ªæ•´æ•°åˆ†é…å†…å­˜ã€‚</p><p>ä½¿ç”¨ç”Ÿæˆå™¨çš„æ —å­ï¼š<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeRange</span><span class="params">($length)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>($i=<span class="number">0</span>; $i&lt;$length; $i++) &#123;</span><br><span class="line">        <span class="keyword">yield</span> $i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">foreach</span> (makeRange(<span class="number">1000000</span>) <span class="keyword">as</span> $i) &#123;</span><br><span class="line">    <span class="keyword">echo</span> $i, PHP_EOL;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™åªæ˜¯ä¸€ä¸ªè™šæ„çš„ä¾‹å­ï¼Œåœ¨ç°å®ä¸­ï¼Œä½ å¯ä»¥æƒ³è±¡ä¸€ä¸‹ä½¿ç”¨ç”Ÿæˆå™¨å¯ä»¥è®¡ç®—ä»€ä¹ˆæ ·çš„æ•°æ®é›†ã€‚å‡è®¾æˆ‘ä»¬ç°åœ¨æƒ³è¿­ä»£ä¸€ä¸ª4GBçš„æ–‡æœ¬æ–‡ä»¶ï¼ˆä¾‹å¦‚é»‘å®¢å­—å…¸ï¼‰ï¼Œè€Œä½ çš„å†…å­˜å¯èƒ½æ¯”4GBè¿˜å°ï¼Œè¿™æ—¶å€™å°±ä¸èƒ½æŠŠæ•´ä¸ªæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œä¸‹é¢ä½¿ç”¨ç”Ÿæˆå™¨æ¥å®ç°è¯»å–ä¸€ä¸ªcvsæ–‡ä»¶ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRows</span><span class="params">($file)</span> </span>&#123;</span><br><span class="line">    $handle = fopen($file, <span class="string">'rb'</span>);</span><br><span class="line">    <span class="keyword">if</span>($handle === <span class="keyword">false</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="keyword">Exception</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(feof($handle) === <span class="keyword">false</span>) &#123;</span><br><span class="line">        <span class="keyword">yield</span> fgetcsv($handle);</span><br><span class="line">    &#125;</span><br><span class="line">    fclose($handle);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">foreach</span> (getRows(<span class="string">'data.csv'</span>) <span class="keyword">as</span> $row) &#123;</span><br><span class="line">    print_r($row);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä¾‹å­ä¸€æ¬¡åªä¼šä¸ºcsvæ–‡ä»¶çš„ä¸€è¡Œåˆ†é…å†…å­˜ã€‚è¿­ä»£å¤§å‹æ•°æ®é›†æˆ–è€…æ•°åˆ—æ—¶æœ€é€‚åˆä½¿ç”¨ç”Ÿæˆå™¨ï¼Œå› ä¸ºè¿™æ ·å ç”¨çš„ç³»ç»Ÿå†…å­˜é‡æå°‘ã€‚</p><blockquote><p>ModernPHP ç³»åˆ—å…¨é›†ï¼š<a href="/modernphp/">ä¼ é€é—¨</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ä»‹ç»PHPä¸­ç”Ÿæˆå™¨çš„æ¦‚å¿µï¼Œä»¥åŠå®ƒçš„åº”ç”¨ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="tech" scheme="https://sidfate.github.io/categories/tech/"/>
    
      <category term="php" scheme="https://sidfate.github.io/categories/tech/php/"/>
    
    
      <category term="php" scheme="https://sidfate.github.io/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>ModernPHP æ€§çŠ¶</title>
    <link href="https://sidfate.github.io/2016/08/28/tech/php/modernphp-trait/"/>
    <id>https://sidfate.github.io/2016/08/28/tech/php/modernphp-trait/</id>
    <published>2016-08-28T06:30:00.000Z</published>
    <updated>2018-10-12T10:56:56.492Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ¬æ–‡è®²è¿°äº†ä½•è°“æ€§çŠ¶ï¼Œä»¥åŠPHPä¸­æ€§çŠ¶å‡ºç°çš„æ„ä¹‰ï¼Œæ€ä¹ˆå»ä½¿ç”¨ã€‚<br><a id="more"></a></p><h3 id="0x00-æ€§çŠ¶æ˜¯ä»€ä¹ˆ"><a href="#0x00-æ€§çŠ¶æ˜¯ä»€ä¹ˆ" class="headerlink" title="0x00 æ€§çŠ¶æ˜¯ä»€ä¹ˆ"></a>0x00 æ€§çŠ¶æ˜¯ä»€ä¹ˆ</h3><p>è¿™æ˜¯PHP5.4.0å¼•å…¥çš„æ¦‚å¿µï¼Œæ—¢åƒç±»åˆåƒæ¥å£ã€‚æ€§çŠ¶æ˜¯ç±»çš„éƒ¨åˆ†å®ç°ï¼ˆå³å¸¸é‡ï¼Œå±æ€§å’Œæ–¹æ³•ï¼‰ï¼Œå¯ä»¥æ··å…¥ä¸€ä¸ªæˆ–å¤šä¸ªç±»ä¸­ã€‚æ€§çŠ¶æœ‰ä¸¤ä¸ªä½œç”¨ï¼šè¡¨åç±»å¯ä»¥åšä»€ä¹ˆï¼ˆåƒæ˜¯æ¥å£ï¼‰ï¼Œæä¾›æ¨¡å—åŒ–çš„å®ç°ï¼ˆåƒæ˜¯ç±»ï¼‰ã€‚</p><h3 id="0x01-æ€§çŠ¶çš„ä½œç”¨"><a href="#0x01-æ€§çŠ¶çš„ä½œç”¨" class="headerlink" title="0x01 æ€§çŠ¶çš„ä½œç”¨"></a>0x01 æ€§çŠ¶çš„ä½œç”¨</h3><p>PHPè¯­è¨€ä½¿ç”¨çš„æ˜¯å…¸å‹çš„ç»§æ‰¿æ¨¡å‹ã€‚åœ¨è¿™ä¸ªæ¨¡å‹ä¸­ï¼Œæˆ‘ä»¬å…ˆåˆ›å»ºåŸºç±»ï¼Œå®ç°åŸºæœ¬çš„åŠŸèƒ½ï¼Œç„¶åæ‰©å±•è¿™ä¸ªåŸºç±»ï¼Œé€šè¿‡ç»§æ‰¿åŸºç±»åˆ›å»ºæ›´å¤šå…·ä½“çš„ç±»ã€‚è¿™å«åšç»§æ‰¿å±‚æ¬¡ç»“æ„ï¼Œå¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½æ˜¯ç”¨è¿™ä¸ªæ¨¡å¼ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœæƒ³è®©ä¸¤ä¸ªæ— å…³çš„PHPç±»å…·æœ‰ç±»å‹çš„è¡Œä¸ºï¼Œåº”è¯¥å¦‚ä½•å»åšï¼Ÿä¾‹å¦‚ï¼ŒSatelliteï¼ˆå«æ˜Ÿç±»ï¼‰å’ŒCarï¼ˆæ±½è½¦ç±»ï¼‰ä¸¤ä¸ªç±»çš„ä½œç”¨ååˆ†ä¸åŒï¼Œåœ¨ç»§æ‰¿å±‚æ¬¡ç»“æ„ä¸Šæ²¡æœ‰å…±åŒçš„çˆ¶ç±»ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªç±»åº”è¯¥éƒ½èƒ½ä½¿ç”¨åœ°ç†ç¼–ç æŠ€æœ¯è½¬æ¢æˆç»çº¬åº¦ï¼Œç„¶ååœ¨åœ°å›¾ä¸Šæ˜¾ç¤ºã€‚</p><p>è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨æ€§çŠ¶æ¥è§£å†³ã€‚æ€§çŠ¶å¯ä»¥æŠŠæ¨¡å—åŒ–çš„å®ç°æ–¹å¼æ³¨å…¥åˆ°å¤šä¸ªæ— å…³çš„ç±»ä¸­ï¼Œè¿˜èƒ½ä¿ƒè¿›ä»£ç çš„é‡ç”¨ã€‚</p><h3 id="0x02-æ€§çŠ¶çš„åˆ›å»º"><a href="#0x02-æ€§çŠ¶çš„åˆ›å»º" class="headerlink" title="0x02 æ€§çŠ¶çš„åˆ›å»º"></a>0x02 æ€§çŠ¶çš„åˆ›å»º</h3><p>å®šä¹‰ä¸€ä¸ªæ€§çŠ¶ï¼š<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">trait</span> MyTrait &#123;</span><br><span class="line">    <span class="comment">// å®ç°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬æ¥ç€ä½¿ç”¨ä¸Šé¢æåˆ°çš„ä¾‹å­æ¥æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨æ€§çŠ¶ã€‚æˆ‘ä»¬å¸Œæœ›Satelliteå’ŒCarç±»éƒ½èƒ½æä¾›åœ°ç†ç¼–ç åŠŸèƒ½ï¼Œè€Œä¸”æ„è¯†åˆ°ç»§æ‰¿å’Œæ¥å£éƒ½ä¸æ˜¯æœ€ä½³æ–¹æ¡ˆã€‚æˆ‘ä»¬é€‰æ‹©åˆ›å»ºGeocodableï¼ˆåœ°ç†ç¼–ç ï¼‰æ€§çŠ¶ï¼Œè¿”å›ç»çº¬åº¦ï¼Œç„¶ååœ¨åœ°å›¾ä¸­ç»˜åˆ¶ã€‚<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">trait</span> Geocodable &#123;</span><br><span class="line">    <span class="comment">/* <span class="doctag">@var</span> string */</span></span><br><span class="line">    <span class="keyword">protected</span> $address;</span><br><span class="line">    <span class="comment">/* <span class="doctag">@var</span> \Geocoder\Geocoder */</span></span><br><span class="line">    <span class="keyword">protected</span> $geocoder;</span><br><span class="line">    <span class="comment">/* <span class="doctag">@var</span> \Geocoder\Result\Geocoded */</span></span><br><span class="line">    <span class="keyword">protected</span> $geocoderResult;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setGeocoder</span><span class="params">(\Geocoder\GeocoderInterface $geocoder)</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;geocoder = $geocoder;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setAddress</span><span class="params">($address)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;address = $address;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getLatitude</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!<span class="keyword">isset</span>(<span class="keyword">$this</span>-&gt;geocoderResult)) &#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;geocodeAddress();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;geocoderResult-&gt;getLatitude();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getLongitude</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!<span class="keyword">isset</span>(<span class="keyword">$this</span>-&gt;geocoderResult)) &#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;geocodeAddress();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;geocoderResult-&gt;getLongitude();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">geocodeAddress</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;geocoderResult = <span class="keyword">$this</span>-&gt;geocoder-&gt;geocode(<span class="keyword">$this</span>-&gt;address);</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™ä¸ªGeocodableæ€§çŠ¶å®šä¹‰äº†ä¸‰ä¸ªç±»å±æ€§ï¼šä¸€ä¸ªè¡¨ç¤ºåœ°å€ï¼›ä¸€ä¸ªæ˜¯åœ°ç†ç¼–ç å™¨å¯¹è±¡ï¼ˆ\Geocoder\Geocoderç±»çš„å®ä¾‹ï¼Œè¿™ä¸ªç±»æ˜¯æ¥è‡ªç¬¬ä¸‰æ–¹çš„ç»„ä»¶ï¼‰ï¼›ä¸€ä¸ªæ˜¯åœ°ç†ç¼–ç å™¨å¤„ç†åçš„ç»“æœå¯¹è±¡ï¼ˆ\Geocoder\Result\Geocodedç±»çš„å®ä¾‹ï¼‰ã€‚æˆ‘ä»¬è¿˜å®šä¹‰äº†4ä¸ªå…¬æœ‰æ–¹æ³•å’Œä¸€ä¸ªå—ä¿æŠ¤çš„æ–¹æ³•ã€‚setGeocoder()æ–¹æ³•ç”¨äºæ³¨å…¥Geocoderå¯¹è±¡ï¼›setAddress()æ–¹æ³•ç”¨äºè®¾å®šåœ°å€ï¼›getLatitude()å’ŒgetLongitude()ç”¨äºè¿”å›ç»çº¬åº¦ï¼›geocodeAddress()æ–¹æ³•æŠŠåœ°å€å­—ç¬¦ä¸²ä¼ ç»™Geocoderå®ä¾‹ï¼Œè·å–åœ°ç†ç¼–ç å™¨å¤„ç†çš„ç»“æœã€‚</p><h3 id="0x03-æ€§çŠ¶çš„ä½¿ç”¨"><a href="#0x03-æ€§çŠ¶çš„ä½¿ç”¨" class="headerlink" title="0x03 æ€§çŠ¶çš„ä½¿ç”¨"></a>0x03 æ€§çŠ¶çš„ä½¿ç”¨</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line">    <span class="keyword">use</span> <span class="title">MyTrait</span>;</span><br><span class="line">    <span class="comment">// ç±»çš„å®ç°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼ŒPHPè§£é‡Šå™¨åœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šæŠŠæ€§çŠ¶å¤åˆ¶é»è´´åˆ°ç±»çš„å®šä¹‰ä½“ä¸­ï¼Œä½†æ˜¯ä¸ä¼šå¤„ç†è¿™ä¸ªæ“ä½œå¼•å…¥çš„ä¸å…¼å®¹é—®é¢˜ã€‚å¦‚æœæ€§çŠ¶å‡å®šç±»ä¸­æœ‰ç‰¹å®šçš„æ–¹æ³•æˆ–å±æ€§ï¼ˆåœ¨æ€§çŠ¶ä¸­æ²¡æœ‰å®šä¹‰ï¼‰ï¼Œè¦ç¡®ä¿ç›¸åº”çš„ç±»ä¸­æœ‰å¯¹åº”çš„å±æ€§å’Œæ–¹æ³•ã€‚</p><blockquote><p>ModernPHP ç³»åˆ—å…¨é›†ï¼š<a href="/modernphp/">ä¼ é€é—¨</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡è®²è¿°äº†ä½•è°“æ€§çŠ¶ï¼Œä»¥åŠPHPä¸­æ€§çŠ¶å‡ºç°çš„æ„ä¹‰ï¼Œæ€ä¹ˆå»ä½¿ç”¨ã€‚&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>ModernPHP å‘½åç©ºé—´</title>
    <link href="https://sidfate.github.io/2016/08/27/tech/php/modernphp-namespace/"/>
    <id>https://sidfate.github.io/2016/08/27/tech/php/modernphp-namespace/</id>
    <published>2016-08-27T08:28:00.000Z</published>
    <updated>2018-10-14T01:36:08.824Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ¬æ–‡ä»‹ç»PHPä¸­å‘½åç©ºé—´çš„ç›¸å…³ä½¿ç”¨å’Œæ¦‚å¿µã€‚<br><a id="more"></a></p><h3 id="0x00-å£°æ˜"><a href="#0x00-å£°æ˜" class="headerlink" title="0x00 å£°æ˜"></a>0x00 å£°æ˜</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Symfony</span>\<span class="title">Component</span>\<span class="title">HttpFoundation</span>;</span><br></pre></td></tr></table></figure><p>è¿™ä¸€è¡Œä»£ç æ˜¯PHPå‘½åç©ºé—´å£°æ˜è¯­å¥ã€‚å£°æ˜è¯­å¥å§‹ç»ˆåº”è¯¥æ”¾åœ¨<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">PHPå‘½åç©ºé—´ä¸æ“ä½œç³»ç»Ÿçš„ç‰©ç†æ–‡ä»¶ç³»ç»Ÿä¸åŒï¼Œè¿™æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„æ¦‚å¿µï¼Œæ²¡å¿…è¦å’Œæ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•ç»“æ„å®Œå…¨å¯¹åº”ã€‚ä½†æ˜¯ï¼Œå¤§å¤šæ•°çš„PHPç»„ä»¶ä¸ºäº†å…¼å®¹å¹¿æ³›ä½¿ç”¨çš„[PSR-4è‡ªåŠ¨åŠ è½½å™¨æ ‡å‡†](https://phphub.org/topics/2081)ï¼Œä¼šæŠŠå­å‘½åç©ºé—´æ”¾åˆ°æ–‡ä»¶ç³»ç»Ÿçš„å­ç›®å½•ä¸‹ã€‚</span><br><span class="line"></span><br><span class="line">### 0x01 å¯¼å…¥</span><br><span class="line">```php</span><br><span class="line">use Symfony\Component\HttpFoundation\Response;</span><br><span class="line"> </span><br><span class="line">$r = new Response();</span><br></pre></td></tr></table></figure></p><p>å½“ç„¶ï¼Œä½ è¿˜å¯ä»¥ç”¨åˆ«åçš„æ–¹å¼å¯¼å…¥ï¼š<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">Symfony</span>\<span class="title">Component</span>\<span class="title">HttpFoundation</span>\<span class="title">Response</span> <span class="title">as</span> <span class="title">Res</span>;</span><br><span class="line"> </span><br><span class="line">$r = <span class="keyword">new</span> Res();</span><br></pre></td></tr></table></figure></p><p>åº”è¯¥åœ¨PHPæ–‡ä»¶é¡¶éƒ¨ä½¿ç”¨useå…³é”®å­—å¯¼å…¥ä»£ç ï¼Œè€Œä¸”è¦æ”¾åœ¨<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ä»PHP5.6å¼€å§‹è¿˜å¯ä»¥å¯¼å…¥å‡½æ•°å’Œå¸¸é‡ã€‚å¯¼å…¥å‡½æ•°æ—¶éœ€è¦ä½¿ç”¨use funcï¼Œå¯¼å…¥å¸¸é‡æ—¶ä½¿ç”¨use constantã€‚</span><br><span class="line">```php</span><br><span class="line">use func Namespace\funcName;</span><br><span class="line">use constant Namespace\CONST_NAME;</span><br><span class="line"> </span><br><span class="line">funcName();</span><br><span class="line">echo CONST_NAME;</span><br></pre></td></tr></table></figure></p><h3 id="0x02-å…¨å±€å‘½åç©ºé—´"><a href="#0x02-å…¨å±€å‘½åç©ºé—´" class="headerlink" title="0x02 å…¨å±€å‘½åç©ºé—´"></a>0x02 å…¨å±€å‘½åç©ºé—´</h3><p>å¦‚æœéœ€è¦åœ¨å‘½åç©ºé—´ä¸­å¼•ç”¨å…¶ä»–å‘½åç©ºé—´çš„ç±»ã€æ¥å£ã€å‡½æ•°æˆ–å¸¸é‡ï¼Œå¿…é¡»ä½¿ç”¨å®Œå…¨é™å®šçš„PHPç±»åï¼ˆå‘½åç©ºé—´+ç±»åï¼‰ï¼Œæˆ–è€…ä½¿ç”¨useå…³é”®å­—æå‰å¯¼å…¥è‡³å½“å‰å‘½åç©ºé—´ã€‚</p><p>æœ‰äº›ä»£ç æ²¡æœ‰å‘½åç©ºé—´ï¼Œè¿™äº›ä»£ç åœ¨å…¨å±€å‘½åç©ºé—´ä¸­ï¼Œä¾‹å¦‚PHPåŸç”Ÿçš„Exceptionç±»ã€‚åœ¨å‘½åç©ºé—´ä¸­å¼•å…¥å…¨å±€å‘½åç©ºé—´çš„ä»£ç æ—¶ï¼Œéœ€è¦åœ¨ç±»ã€æ¥å£ã€å‡½æ•°æˆ–è€…å¸¸é‡å‰åŠ ä¸Š\ç¬¦å·ã€‚ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<figure class="highlight plain"><figcaption><span>æ–¹æ³•ä¼šæŠ¥é”™ï¼Œå› ä¸ºPHPä¼šå»æœç´¢å½“å‰å‘½åç©ºé—´ä¸‹çš„Exceptionï¼Œä¹Ÿå°±æ˜¯ä¼šå»æœç´¢\My\Space\Foo\Exceptionç±»ï¼Œä½†æ˜¯è¿™ä¸ªç±»ä¸å­˜åœ¨ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦åœ¨Exceptionç±»å‰åŠ ä¸Š\å‰ç¼€ï¼Œè¡¨åè¦å»å…¨å±€å‘½åç©ºé—´ä¸­æŸ¥æ‰¾è¯¥ç±»ã€‚</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ä¸€ä¸ªé”™è¯¯çš„æ —å­ï¼š</span><br><span class="line">```php</span><br><span class="line">namespace My\Space;</span><br><span class="line">class Foo()</span><br><span class="line">&#123;</span><br><span class="line">    public function run()</span><br><span class="line">    &#123;</span><br><span class="line">        $e = new Exception();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>çœŸç¡®çš„æ —å­ï¼š<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">My</span>\<span class="title">Space</span>;</span><br><span class="line">class Foo()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $e = <span class="keyword">new</span> \<span class="keyword">Exception</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><blockquote><p>ModernPHP ç³»åˆ—å…¨é›†ï¼š<a href="/modernphp/">ä¼ é€é—¨</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ä»‹ç»PHPä¸­å‘½åç©ºé—´çš„ç›¸å…³ä½¿ç”¨å’Œæ¦‚å¿µã€‚&lt;br&gt;
    
    </summary>
    
      <category term="tech" scheme="https://sidfate.github.io/categories/tech/"/>
    
      <category term="php" scheme="https://sidfate.github.io/categories/tech/php/"/>
    
    
      <category term="php" scheme="https://sidfate.github.io/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>Linux å®šæ—¶ä»»åŠ¡crontab</title>
    <link href="https://sidfate.github.io/2016/08/22/tech/devops/linux-crontab/"/>
    <id>https://sidfate.github.io/2016/08/22/tech/devops/linux-crontab/</id>
    <published>2016-08-22T09:12:00.000Z</published>
    <updated>2018-10-14T02:47:04.965Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Linuxéƒ¨ç½²ç¯‡ - å¦‚ä½•ä½¿ç”¨crontabå®Œæˆå®šæ—¶ä»»åŠ¡ã€‚<br><a id="more"></a></p><h3 id="0x00-ç®€ä»‹"><a href="#0x00-ç®€ä»‹" class="headerlink" title="0x00 ç®€ä»‹"></a>0x00 ç®€ä»‹</h3><p>å¯¹åº”äºwindowsä¸­çš„å®šæ—¶è®¡åˆ’ï¼Œlinux ä¸­æœ‰ä¸ªcrontabæ¥å¤„ç†å®šæ—¶ä»»åŠ¡ã€‚é‚£ä¹ˆå¸¸è§çš„å®šæ—¶ä»»åŠ¡æœ‰å“ªäº›å‘¢ï¼Œä¾‹å¦‚æ¯å¤©å‡Œæ™¨1ç‚¹è‡ªåŠ¨å¤‡ä»½æ•°æ®åº“ï¼Œæ¯éš”1å°æ—¶æ‰§è¡Œçˆ¬è™«è„šæœ¬çˆ¬å–ä¿¡æ¯ç­‰ç­‰ã€‚</p><h3 id="0x01-å¸¸ç”¨å‘½ä»¤"><a href="#0x01-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="0x01 å¸¸ç”¨å‘½ä»¤"></a>0x01 å¸¸ç”¨å‘½ä»¤</h3><ul><li><code>crontab -l</code> åˆ—å‡ºå½“å‰çš„çš„å®šæ—¶ä»»åŠ¡ï¼Œæˆ–è€…<code>vi /etc/crontab</code></li><li><code>crontab -e</code> ç¼–è¾‘å®šæ—¶è„šæœ¬</li></ul><h3 id="0x02-æ·»åŠ ä»»åŠ¡"><a href="#0x02-æ·»åŠ ä»»åŠ¡" class="headerlink" title="0x02 æ·»åŠ ä»»åŠ¡"></a>0x02 æ·»åŠ ä»»åŠ¡</h3><p>åˆ†ã€€æ—¶ã€€æ—¥ã€€æœˆã€€å‘¨ command</p><ul><li>ç¬¬1åˆ—è¡¨ç¤ºåˆ†é’Ÿ1ï½59 æ¯åˆ†é’Ÿç”¨<em>æˆ–è€… </em>/1è¡¨ç¤º </li><li>ç¬¬2åˆ—è¡¨ç¤ºå°æ—¶1ï½23ï¼ˆ0è¡¨ç¤º0ç‚¹ï¼‰ </li><li>ç¬¬3åˆ—è¡¨ç¤ºæ—¥æœŸ1ï½31 </li><li>ç¬¬4åˆ—è¡¨ç¤ºæœˆä»½1ï½12 </li><li>ç¬¬5åˆ—æ ‡è¯†å·æ˜ŸæœŸ0ï½6ï¼ˆ0è¡¨ç¤ºæ˜ŸæœŸå¤©ï¼‰ </li><li>ç¬¬6åˆ—è¦è¿è¡Œçš„å‘½ä»¤ </li></ul><p>ä¸€äº›ä¾‹å­ï¼š</p><ol><li><p>æ¯éš”ä¸€åˆ†é’Ÿæ‰§è¡Œ<code>root /opt/bin/test-cron.sh</code></p><pre><code>*/1 * * * * root /opt/bin/test-cron.sh  </code></pre></li><li><p>æ¯å¤©4ç‚¹æ‰§è¡Œ<code>/home/dbbackup/db2backup.sh backup</code></p><pre><code>0 4 * * * /home/dbbackup/db2backup.sh backup</code></pre></li></ol><h3 id="0x02-æ³¨æ„"><a href="#0x02-æ³¨æ„" class="headerlink" title="0x02 æ³¨æ„"></a>0x02 æ³¨æ„</h3><ol><li><p>æŸ¥çœ‹ä»»åŠ¡æ‰§è¡Œ</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> tail -f /var/log/cron</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœä½ çš„crontabæ²¡æœ‰ç”Ÿæ•ˆï¼Œä½ å¾—æŸ¥çœ‹ä¸‹<code>crond</code>æœåŠ¡æœ‰æ²¡æœ‰å¼€å¯</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> service crond status</span><br><span class="line"><span class="meta">$</span> service crond restart</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Linuxéƒ¨ç½²ç¯‡ - å¦‚ä½•ä½¿ç”¨crontabå®Œæˆå®šæ—¶ä»»åŠ¡ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="tech" scheme="https://sidfate.github.io/categories/tech/"/>
    
      <category term="devops" scheme="https://sidfate.github.io/categories/tech/devops/"/>
    
    
      <category term="linux" scheme="https://sidfate.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Apache å¼€å¯.htaccess</title>
    <link href="https://sidfate.github.io/2016/08/03/tech/devops/apache-start-htaccess/"/>
    <id>https://sidfate.github.io/2016/08/03/tech/devops/apache-start-htaccess/</id>
    <published>2016-08-03T09:34:00.000Z</published>
    <updated>2018-10-12T10:13:50.890Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ¬æ–‡ä»‹ç»apacheå¼€å¯htaccessé…ç½®çš„æ–¹æ³•ã€‚</p><a id="more"></a><h3 id="0x00-å¼€å§‹"><a href="#0x00-å¼€å§‹" class="headerlink" title="0x00 å¼€å§‹"></a>0x00 å¼€å§‹</h3><ol><li>æ‰¾åˆ°apacheé…ç½®æ–‡ä»¶<code>httpd.conf</code>ï¼Œæ‰¾åˆ° </li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#LoadModule rewrite_module modules/mod_rewrite.so</span><br></pre></td></tr></table></figure><p>å»æ‰å‰é¢çš„æ³¨é‡Šç¬¦å·#ã€‚å¹¶ç¡®è®¤apacheå®‰è£…ç›®å½•ä¸‹çš„modulesæ–‡ä»¶å¤¹ä¸­æ˜¯å¦æœ‰<code>mod_rewrite.so</code>è¿™ä¸ªæ–‡ä»¶ã€‚è¿™æ ·å°±å¯ç”¨äº†Mod RewriteåŠŸèƒ½ã€‚</p><ol start="2"><li>æœç´¢AllowOverrideï¼Œæ‰¾åˆ°ä»¥ä¸‹ç±»ä¼¼é…ç½®</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Directory /&gt;</span><br><span class="line">Options FollowSymLinks</span><br><span class="line">AllowOverride None</span><br><span class="line">Order deny,allow</span><br><span class="line">Deny from all</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure><p>æŠŠ<code>AllowOverride None</code>æ”¹æˆ<code>AllowOverride All</code>ï¼Œè¿™æ ·æ‰€æœ‰çš„æ–‡ä»¶å¤¹éƒ½æ”¯æŒ.htaccessäº†ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ä»‹ç»apacheå¼€å¯htaccessé…ç½®çš„æ–¹æ³•ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="tech" scheme="https://sidfate.github.io/categories/tech/"/>
    
      <category term="devops" scheme="https://sidfate.github.io/categories/tech/devops/"/>
    
    
      <category term="Apache" scheme="https://sidfate.github.io/tags/Apache/"/>
    
  </entry>
  
</feed>
